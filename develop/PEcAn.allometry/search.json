[{"path":"/articles/AllomVignette.html","id":"install-package-from-github","dir":"Articles","previous_headings":"","what":"install package from Github","title":"PEcAn.allometry Vignette","text":"needs done first time","code":"library(devtools) install_github(\"PecanProject/pecan\",subdir=\"modules/allometry\")"},{"path":"/articles/AllomVignette.html","id":"define-species-groups","dir":"Articles","previous_headings":"","what":"Define species groups","title":"PEcAn.allometry Vignette","text":"","code":"library(PEcAn.allometry)  ## define the Plant Functional Types you want to fit based on USDA acronyms and USFS species codes (spcd) ## can involve one or many species ## multiple PFTs can be fit at once by putting them in a list ## Note that the name used in the PFT list defines the name that the code will match against when making predictions for new individuals pfts = list(FAGR = data.frame(spcd=531,acronym=\"FAGR\"))  ## example of a PFT with multiple species (LH = late hardwood) ## note that if you're just using Jenkins the acronym column is optional pfts = list(LH = data.frame(spcd = c(531,318),acronym=c(\"FAGR\",\"ACSA3\")))"},{"path":"/articles/AllomVignette.html","id":"run-the-bayesian-allometry-model","dir":"Articles","previous_headings":"","what":"Run the Bayesian allometry model","title":"PEcAn.allometry Vignette","text":"Note side effects function create two files working directory every PFT component pair, pdf file diagnostics RData file saving full output. files named based PFT component. return function summary table statistics. function actually run two variants model, “global” modelthat fits single equation equations ‘hierarchical’ model accounts variability among equations. function also print DIC statistics fit better (lowest score wins): DIC hierarchical model, DICg global model. want run response variable default (e.g. components = 6; stem biomass), look relevant component IDs data(allom.components). default component 3 (total aboveground biomass). Note specify multiple PFTs (list) multiple components (vector) AllomAve generate allometries PFT x component combinations","code":"allom.stats = AllomAve(pfts,ngibbs=500) ## [1] \"writing output to\"                            ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes\" ## $spcd ## [1] 531 318 ##  ## $acronym ## [1] \"FAGR\"  \"ACSA3\" ##  ## [[3]] ## [1] 6 ## Warning in nu(allom$parm$Component.ID): NAs introduced by coercion ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"saving MCMC output to\"                                         ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes/Allom.LH.6.Rdata\" ## [1] \"saving diagnostic graphs to\"                                      ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes/Allom.LH.6.MCMC.pdf\" ## [1] \"DIC\"              \"429.984686560403\" \"pD\"               \"259.864350306721\" ## [1] \"DICg\"             \"484.145030155402\" \"pDg\"              \"239.430149989321\" allom.stats = AllomAve(pfts,ngibbs=500,components=c(3,6)) ## [1] \"writing output to\"                            ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes\" ## $spcd ## [1] 531 318 ##  ## $acronym ## [1] \"FAGR\"  \"ACSA3\" ##  ## [[3]] ## [1] 3 ## Warning in nu(allom$parm$Component.ID): NAs introduced by coercion ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"saving MCMC output to\"                                         ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes/Allom.LH.3.Rdata\" ## [1] \"saving diagnostic graphs to\"                                      ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes/Allom.LH.3.MCMC.pdf\" ## [1] \"DIC\"              \"398.262565324318\" \"pD\"               \"182.675675901337\" ## [1] \"DICg\"             \"450.255147011405\" \"pDg\"              \"205.909090242768\" ## $spcd ## [1] 531 318 ##  ## $acronym ## [1] \"FAGR\"  \"ACSA3\" ##  ## [[3]] ## [1] 6 ## Warning in nu(allom$parm$Component.ID): NAs introduced by coercion ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"Dropping allom rows: \" ##   |                                                                              |                                                                      |   0% ## [1] \"saving MCMC output to\"                                         ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes/Allom.LH.6.Rdata\" ## [1] \"saving diagnostic graphs to\"                                      ## [2] \"/__w/pecan/pecan/modules/allometry/vignettes/Allom.LH.6.MCMC.pdf\" ## [1] \"DIC\"              \"416.749596701922\" \"pD\"               \"256.1407646455\"   ## [1] \"DICg\"             \"486.211239478766\" \"pDg\"              \"247.353472968399\""},{"path":"/articles/AllomVignette.html","id":"predict-for-individual-trees","dir":"Articles","previous_headings":"","what":"Predict for individual trees","title":"PEcAn.allometry Vignette","text":"","code":"allom.fit = load.allom(getwd()) dbh = 1:50 pred = allom.predict(allom.fit,dbh = dbh,pft = \"LH\",component = 3,use = \"Bg\",interval = \"prediction\") conf = allom.predict(allom.fit,dbh = dbh,pft = \"LH\",component = 3,use = \"Bg\",interval = \"confidence\") PI = apply(pred,2,quantile,c(0.025,0.5,0.975),na.rm=TRUE) CI = apply(conf,2,quantile,c(0.025,0.5,0.975),na.rm=TRUE) plot(dbh,CI[2,],type='l',lwd=3,ylim=range(PI),ylab=\"Biomass (kg)\") lines(dbh,CI[1,],lty=2,col=\"blue\") lines(dbh,CI[3,],lty=2,col=\"blue\") lines(dbh,PI[1,],lty=3,col=\"red\") lines(dbh,PI[3,],lty=3,col=\"red\")"},{"path":"/articles/AllomVignette.html","id":"predict-for-a-stand","dir":"Articles","previous_headings":"","what":"Predict for a stand","title":"PEcAn.allometry Vignette","text":"","code":"## simulated DBH's dbh = rpois(100,20) hist(dbh) stand = allom.predict(allom.fit,dbh = dbh,pft = \"LH\",component = 3,use = \"Bg\",interval = \"prediction\") AGB = apply(stand,1,sum) hist(AGB)"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mike Dietze. Author, maintainer. Shashank Singh. Contributor. University Illinois, NCSA. Copyright holder.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Dietze M (2025). PEcAn.allometry: PEcAn Allometry Functions. R package version 1.7.4, https://pecanproject.github.io.","code":"@Manual{,   title = {PEcAn.allometry: PEcAn Allometry Functions},   author = {Mike Dietze},   year = {2025},   note = {R package version 1.7.4},   url = {https://pecanproject.github.io}, }"},{"path":"/index.html","id":"pecanallometry","dir":"","previous_headings":"","what":"PEcAn Allometry Functions","title":"PEcAn Allometry Functions","text":"PEcAn Allometry Functions","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"PEcAn Allometry Functions","text":"can install development version PEcAn.allometry r-universe like : can install directly GitHub remotes package like :","code":"# Enable repository from pecanproject options(repos = c(   pecanproject = 'https://pecanproject.r-universe.dev',   CRAN = 'https://cloud.r-project.org')) # Download and install PEcAn.allometry in R install.packages('PEcAn.allometry') library(remotes) install_github('pecanproject/pecan',  subdir = \"modules/allometry\")"},{"path":"/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"PEcAn Allometry Functions","text":"basic example shows solve common problem:","code":"library(PEcAn.allometry) ## basic example code"},{"path":"/reference/AllomAve.html","id":null,"dir":"Reference","previous_headings":"","what":"AllomAve — AllomAve","title":"AllomAve — AllomAve","text":"Allometry wrapper function handles loading subsetting data,  fitting Bayesian models, generating diagnostic figures. Set loop   multiple PFTs components.   Writes raw MCMC PDF diagnositcs file returns table summary stats. two usages function. running 'online' (connected PEcAn database), pass database connection,  con, pfts subsection PEcAn settings. running 'stand alone' pass pft list mapping species species codes  file paths allometry table field data (optional)","code":""},{"path":"/reference/AllomAve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"AllomAve — AllomAve","text":"","code":"AllomAve(   pfts,   components = 6,   outdir = NULL,   con = NULL,   field = NULL,   parm = system.file(\"data/Table3_GTR-NE-319.v2.csv\", package = \"PEcAn.allometry\"),   ngibbs = 5000,   nchain = 3,   dmin = 0.1,   dmax = 500 )"},{"path":"/reference/AllomAve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"AllomAve — AllomAve","text":"pfts pft list PEcAn settings (con) list pft spcd's latter, names within list used identify PFTs 'acronym' - USDA species acronyms (see plants.usda.gov), used FIELD data (vector) 'spcd' - USFS species codes, use PARM data (vector) components IDs allometry components Jenkins et al 2004 Table 5. Default stem biomass (6). See data(allom.components) outdir output directory files written . Default getwd() con database connection field path(s) raw data files parm path allometry equation file (NULL default loads Jenkins Table 3) ngibbs number MCMC iterations (per chain) run nchain number MCMC chains dmin minimum dbh interest dmax maximum dbh interest","code":""},{"path":"/reference/AllomAve.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"AllomAve — AllomAve","text":"nested list parameter summary statistics","code":""},{"path":"/reference/AllomAve.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"AllomAve — AllomAve","text":"Michael Dietze","code":""},{"path":"/reference/AllomAve.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"AllomAve — AllomAve","text":"","code":"if(FALSE){   pfts = list(FAGR = data.frame(spcd=531,acronym='FAGR'))   allom.stats = AllomAve(pfts,ngibbs=500)    ## example of a PFT with multiple species (late hardwood)   ## note that if you're just using Jenkins the acronym column is optional   pfts = list(LH = data.frame(spcd = c(531,318),acronym=c('FAGR','ACSA3'))) }"},{"path":"/reference/AllomUnitCoef.html","id":null,"dir":"Reference","previous_headings":"","what":"AllomUnitCoef — AllomUnitCoef","title":"AllomUnitCoef — AllomUnitCoef","text":"converts length units cm specified units  converts mass units kg specificed units","code":""},{"path":"/reference/AllomUnitCoef.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"AllomUnitCoef — AllomUnitCoef","text":"","code":"AllomUnitCoef(x, tp = NULL)"},{"path":"/reference/AllomUnitCoef.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"AllomUnitCoef — AllomUnitCoef","text":"x units: mm, cm, cm2, m, , g, kg, lb, Mg tp diameter type, leave NULL DBH. Options: 'd.b.h.^2','cbh','crc'","code":""},{"path":"/reference/allom.BayesFit.html","id":null,"dir":"Reference","previous_headings":"","what":"allom.BayesFit — allom.BayesFit","title":"allom.BayesFit — allom.BayesFit","text":"Module fit common power-law allometric model mixture raw data allometric equations Heirarchical Bayes framework multiple imputation allometric data","code":""},{"path":"/reference/allom.BayesFit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"allom.BayesFit — allom.BayesFit","text":"","code":"allom.BayesFit(allom, nrep = 10000, form = \"power\", dmin = 0.1, dmax = 500)"},{"path":"/reference/allom.BayesFit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"allom.BayesFit — allom.BayesFit","text":"allom - object (usually generated query.allom.data)         needs list two entries:   'field' - contains list, entry             data frame 'x' 'y'. Can NULL   'parm' -  single data frame following components: n sample size eqn coefficient b eqn coefficient c eqn coefficient d eqn coefficient e eqn coefficient se standard error eqn sample size Xmin smallest tree sampled (cm) Xmax largest tree sampled (cm) Xcor units correction X Ycor units correction Y Xtype type measurement X spp - USFS species code nrep - number MCMC replicates form functional form allometry: 'power' vs 'exp' dmin minimum dbh interest dmax maximum dbh interest","code":""},{"path":"/reference/allom.BayesFit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"allom.BayesFit — allom.BayesFit","text":"returns MCMC chain ONE instance 'data' note: many cases estimates multiply imputed","code":""},{"path":"/reference/allom.BayesFit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"allom.BayesFit — allom.BayesFit","text":"dependencies: requires MCMCpack mvtnorm note: runs 1 chain, multiple chains can simulated       multiple function calls","code":""},{"path":"/reference/allom.BayesFit.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"allom.BayesFit — allom.BayesFit","text":"Michael Dietze","code":""},{"path":"/reference/allom.predict.html","id":null,"dir":"Reference","previous_headings":"","what":"allom.predict — allom.predict","title":"allom.predict — allom.predict","text":"Function making tree-level Monte Carlo predictions allometric equations estimated PEcAn allometry module","code":""},{"path":"/reference/allom.predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"allom.predict — allom.predict","text":"","code":"allom.predict(   object,   dbh,   pft = NULL,   component = NULL,   n = NULL,   use = \"Bg\",   interval = \"prediction\",   single.tree = FALSE )"},{"path":"/reference/allom.predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"allom.predict — allom.predict","text":"object Allometry model object. Option includes 'list mcmc' - mcmc outputs list PFT component 'vector file paths' - path(s) AllomAve RData files 'directory files located - dbh Diameter Breast Height (cm) pft Plant Functional Type. Needs match name used AllomAve. Can NULL one PFT/species exists, otherwise needs length dbh component component predict. Can NULL one component analysed AllomAve. n Number Monte Carlo samples. Defaults number MCMC object use c('Bg','mu','best') interval c('none','confidence','prediction') default prediction single.tree logical: DBH time series one individual tree? TRUE, use fixed error draws.","code":""},{"path":"/reference/allom.predict.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"allom.predict — allom.predict","text":"matrix Monte Carlo predictions n rows one column per DBH","code":""},{"path":"/reference/allom.predict.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"allom.predict — allom.predict","text":"Michael Dietze, Christy Rollinson","code":""},{"path":"/reference/allom.predict.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"allom.predict — allom.predict","text":"","code":"if (FALSE) { # \\dontrun{   object = '~/Dropbox//HF C Synthesis/Allometry Papers & Analysis/'   dbh = seq(10,50,by=5)   mass = allom.predict(object,dbh,n=100)  } # }"},{"path":"/reference/load.allom.html","id":null,"dir":"Reference","previous_headings":"","what":"load.allom — load.allom","title":"load.allom — load.allom","text":"loads allom files","code":""},{"path":"/reference/load.allom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"load.allom — load.allom","text":"","code":"load.allom(object)"},{"path":"/reference/load.allom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"load.allom — load.allom","text":"object Allometry model object. Option includes 'vector file paths' - path(s) AllomAve RData files 'directory files located -","code":""},{"path":"/reference/load.allom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"load.allom — load.allom","text":"mcmc outputs list PFT component","code":""},{"path":"/reference/load.allom.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"load.allom — load.allom","text":"Michael Dietze","code":""},{"path":"/reference/load.allom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"load.allom — load.allom","text":"","code":"if (FALSE) { # \\dontrun{   object = '~/Dropbox//HF C Synthesis/Allometry Papers & Analysis/'   allom.mcmc = load.allom(object)  } # }"},{"path":"/reference/nu.html","id":null,"dir":"Reference","previous_headings":"","what":"nu — nu","title":"nu — nu","text":"converts factors numeric","code":""},{"path":"/reference/nu.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"nu — nu","text":"","code":"nu(x)"},{"path":"/reference/nu.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"nu — nu","text":"x data","code":""},{"path":"/reference/query.allom.data.html","id":null,"dir":"Reference","previous_headings":"","what":"query.allom.data — query.allom.data","title":"query.allom.data — query.allom.data","text":"Module grab allometric information raw data table grab original field data tallied equations","code":""},{"path":"/reference/query.allom.data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"query.allom.data — query.allom.data","text":"","code":"query.allom.data(pft_name, variable, con, nsim = 10000)"},{"path":"/reference/query.allom.data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"query.allom.data — query.allom.data","text":"pft_name name Plant Functional Type queried variable name response variable con open database connection nsim number pseudo-data simulations estimating SE","code":""},{"path":"/reference/query.allom.data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"query.allom.data — query.allom.data","text":"Tallied equation format based Jenkins et al 2004 USFS General Technical Report NE-319 database assumed conform PEcAn Schema","code":""},{"path":"/reference/query.allom.data.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"query.allom.data — query.allom.data","text":"Michael Dietze","code":""},{"path":"/reference/read.allom.data.html","id":null,"dir":"Reference","previous_headings":"","what":"read.allom.data — read.allom.data","title":"read.allom.data — read.allom.data","text":"Extracts PFT- component-specific data allometeric equations specified files.","code":""},{"path":"/reference/read.allom.data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"read.allom.data — read.allom.data","text":"","code":"read.allom.data(pft.data, component, field, parm, nsim = 10000)"},{"path":"/reference/read.allom.data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"read.allom.data — read.allom.data","text":"pft.data PFT dataframe acronym USDA species acronyms, used FIELD data (vector) spcd USFS species codes, use TALLY data (vector) component allometry ID, Jenkins table 5 field raw field data parm allometry equation file, Jenkins table 3 nsim number Monte Carlo draws numerical transforms","code":""},{"path":"/reference/read.allom.data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"read.allom.data — read.allom.data","text":"field PFT-filtered field Data parm Component- PFT-filtered Allometric Equations","code":""},{"path":"/reference/read.allom.data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"read.allom.data — read.allom.data","text":"code also estimates standard error R-squared, required simulate pseudodata allometric eqns.","code":""},{"path":[]},{"path":"/news/index.html","id":"license-change-1-7-4","dir":"Changelog","previous_headings":"","what":"License change","title":"PEcAn.allometry 1.7.4","text":"PEcAn.allometry now distributed BSD three-clause license instead NCSA Open Source license.","code":""},{"path":"/news/index.html","id":"pecanallometry-173","dir":"Changelog","previous_headings":"","what":"PEcAn.allometry 1.7.3","title":"PEcAn.allometry 1.7.3","text":"Fixed many R CMD check issues","code":""},{"path":"/news/index.html","id":"pecanallometry-171","dir":"Changelog","previous_headings":"","what":"PEcAn.allometry 1.7.1","title":"PEcAn.allometry 1.7.1","text":"changes 1.7.1 earlier recorded single file PEcAn packages; please see https://github.com/PecanProject/pecan/blob/v1.7.1/CHANGELOG.md details.","code":""}]
