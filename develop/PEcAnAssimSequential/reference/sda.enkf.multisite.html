<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>State Variable Data Assimilation: Ensemble Kalman Filter and Generalized ensemble filter — sda.enkf.multisite • PEcAnAssimSequential</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="State Variable Data Assimilation: Ensemble Kalman Filter and Generalized ensemble filter — sda.enkf.multisite"><meta name="description" content="Check out SDA_control function for more details on the control arguments."><meta property="og:description" content="Check out SDA_control function for more details on the control arguments."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PEcAnAssimSequential</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.0.9000</small>

    <a href="../index.html" style="padding: 0em 1em">← Up</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>State Variable Data Assimilation: Ensemble Kalman Filter and Generalized ensemble filter</h1>
      <small class="dont-index">Source: <a href="https://github.com/PecanProject/pecan/blob/develop/modules/assim.sequential/R/sda.enkf_MultiSite.R" class="external-link"><code>R/sda.enkf_MultiSite.R</code></a></small>
      <div class="d-none name"><code>sda.enkf.multisite.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Check out SDA_control function for more details on the control arguments.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sda.enkf.multisite</span><span class="op">(</span></span>
<span>  <span class="va">settings</span>,</span>
<span>  <span class="va">obs.mean</span>,</span>
<span>  <span class="va">obs.cov</span>,</span>
<span>  Q <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  restart <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pre_enkf_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ensemble.samples <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trace <span class="op">=</span> <span class="cn">TRUE</span>, TimeseriesPlot <span class="op">=</span> <span class="cn">FALSE</span>, debug <span class="op">=</span> <span class="cn">FALSE</span>, pause <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    Profiling <span class="op">=</span> <span class="cn">FALSE</span>, OutlierDetection <span class="op">=</span> <span class="cn">FALSE</span>, parallel_qsub <span class="op">=</span> <span class="cn">TRUE</span>, send_email <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    keepNC <span class="op">=</span> <span class="cn">TRUE</span>, forceRun <span class="op">=</span> <span class="cn">TRUE</span>, run_parallel <span class="op">=</span> <span class="cn">TRUE</span>, MCMC.args <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  cov_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  debias_start_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  debias_drop_incomplete_covariates <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  debias_enforce_consistent_obs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  debias_require_obs_at_t_for_predict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-settings">settings<a class="anchor" aria-label="anchor" href="#arg-settings"></a></dt>
<dd><p>PEcAn settings object</p></dd>


<dt id="arg-obs-mean">obs.mean<a class="anchor" aria-label="anchor" href="#arg-obs-mean"></a></dt>
<dd><p>Lists of date times named by time points, which contains lists of sites named by site ids, which contains observation means for each state variables of each site for each time point.</p></dd>


<dt id="arg-obs-cov">obs.cov<a class="anchor" aria-label="anchor" href="#arg-obs-cov"></a></dt>
<dd><p>Lists of date times named by time points, which contains lists of sites named by site ids, which contains observation covariances for all state variables of each site for each time point.</p></dd>


<dt id="arg-q">Q<a class="anchor" aria-label="anchor" href="#arg-q"></a></dt>
<dd><p>Process covariance matrix given if there is no data to estimate it.</p></dd>


<dt id="arg-restart">restart<a class="anchor" aria-label="anchor" href="#arg-restart"></a></dt>
<dd><p>Used for iterative updating previous forecasts. Default NULL. List object includes file path to previous runs and start date for SDA.</p></dd>


<dt id="arg-pre-enkf-params">pre_enkf_params<a class="anchor" aria-label="anchor" href="#arg-pre-enkf-params"></a></dt>
<dd><p>Used for passing pre-existing time-series of process error into the current SDA runs to ignore the impact by the differences between process errors.</p></dd>


<dt id="arg-ensemble-samples">ensemble.samples<a class="anchor" aria-label="anchor" href="#arg-ensemble-samples"></a></dt>
<dd><p>Pass ensemble.samples from outside to avoid GitHub check issues.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>List of flags controlling the behavior of the SDA.
`trace` for reporting back the SDA outcomes;
`TimeseriesPlot` for post analysis examination;
`debug` decide if we want to pause the code and examining the variables inside the function;
`pause` decide if we want to pause the SDA workflow at current time point t;
`Profiling` decide if we want to export the temporal SDA outputs in CSV file;
`OutlierDetection` decide if we want to execute the outlier detection each time after the model forecasting;
`parallel_qsub` decide if we want to execute the `qsub` job submission under parallel mode;
`send_email` contains lists for sending email to report the SDA progress;
`keepNC` decide if we want to keep the NetCDF files inside the out directory;
`forceRun` decide if we want to proceed the Bayesian MCMC sampling without observations;
`run_parallel` decide if we want to run the SDA under parallel mode for the `future_map` function;
`MCMC.args` include lists for controling the MCMC sampling process (iteration, nchains, burnin, and nthin.).</p></dd>


<dt id="arg-cov-dir">cov_dir<a class="anchor" aria-label="anchor" href="#arg-cov-dir"></a></dt>
<dd><p>Directory containing yearly covariate stacks named like "covariates_YYYY.tiff".</p></dd>


<dt id="arg-debias-start-year">debias_start_year<a class="anchor" aria-label="anchor" href="#arg-debias-start-year"></a></dt>
<dd><p>Integer year (e.g., 2015). If `NULL`, debiasing is OFF.</p></dd>


<dt id="arg-debias-drop-incomplete-covariates">debias_drop_incomplete_covariates<a class="anchor" aria-label="anchor" href="#arg-debias-drop-incomplete-covariates"></a></dt>
<dd><p>Logical; drop sites with any NA covariates</p></dd>


<dt id="arg-debias-enforce-consistent-obs">debias_enforce_consistent_obs<a class="anchor" aria-label="anchor" href="#arg-debias-enforce-consistent-obs"></a></dt>
<dd><p>Logical; drop sites that lost any previously</p></dd>


<dt id="arg-debias-require-obs-at-t-for-predict">debias_require_obs_at_t_for_predict<a class="anchor" aria-label="anchor" href="#arg-debias-require-obs-at-t-for-predict"></a></dt>
<dd><p>Logical; only make residual predictions</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments, currently ignored</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>NONE</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Restart mode:  Basic idea is that during a restart (primary case envisioned
as an iterative forecast), a new workflow folder is created and the previous
forecast for the start_time is copied over. During restart the initial run
before the loop is skipped, with the info being populated from the previous
run. The function then dives right into the first Analysis, then continues
on like normal.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michael Dietze, Ann Raiho and Alexis Helgeson <a href="mailto:dietze@bu.edu">dietze@bu.edu</a></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Dietze.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

