[{"path":"/articles/single.MA_demo.html","id":"meta-analysis-example-of-single-ma","dir":"Articles","previous_headings":"","what":"Meta-analysis: Example of Single.MA","title":"Example of Single.MA","text":"Individual Meta-analysis Individual meta-analysis specific trait PFT run function single.MA. allow power analysis run repeated MA outside full loop traits PFTs. first step convert R distribution JAGS distribution. prior transformed stored jagsprior parameters renamed “distn”, “”, “b” “n”. input used simple example 4 observations. r2bugs.distributions function convert R parameterizations BUGS paramaterizations convert BUGS R. can work distributions including normal, weibull, gamma, chsq, binormial, negative binormial. input function information prior distribution, including name distribution 2 parameters. convert parameterization format R BUGS BUGS R automaticaly. jagify convert queried data format required JAGS meta-analysis model. single.MA function, input trait data prior, transfer prior R parameterization BUGS parameterization using function r2bugs.distributions. Using jags.model function, Bayesian graphical model generated based initials. posterior samples mcmc.list format created output function. meta-analysis outputs summarized pecan.ma.summary function. create several log files traits record R output convergency diagnosis, several PDF file traits store diagnosis plot convergency. G-R diagnostics used test convergence. diagnose result output log file. JAGS model failed converge, warning also generated.","code":"require(knitr) opts_chunk$set(echo = FALSE, message = FALSE, results='hide', cache=TRUE,                 eval = FALSE ## just to allow .md to be compiled                ) require(PEcAn.MA) ##initializing data <- data.frame(t(data.frame(array(c(5.3,1.0976426,4,1,1,1,3.4,2.1821789,4,1,1,1,5.9,0.9622504,4,1,1,1,6.6,1.3245324,4,1,1,1),dim=c(6,4)),row.names=c(\"Y\",\"obs.prec\",\"n\",\"ghs\",\"trt\",\"site\")))) j.chains <- 4 j.iter <- 1000 jag.model.file <- \"tesst.bug\" tauA <- 0.001 tauB <- 0.001 prior <- data.frame(distn = \"norm\", parama = 0, paramb = 2, n = NA) ##running single.MA output <- single.MA(data, j.chains, j.iter, tauA, tauB, prior,jag.model.file, overdispersed=TRUE) ## Compiling model graph ##    Resolving undeclared variables ##    Allocating nodes ## Graph information: ##    Observed stochastic nodes: 8 ##    Unobserved stochastic nodes: 2 ##    Total graph size: 25 ##  ## Initializing model"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mike Dietze. Author. David LeBauer. Author, maintainer. Xiaohui Feng. Author. Dan Wang. Author. Carl Davidson. Author. Rob Kooper. Author. Shawn Serbin. Author. Shashank Singh. Author. University Illinois, NCSA. Copyright holder.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Dietze M, LeBauer D, Feng X, Wang D, Davidson C, Kooper R, Serbin S, Singh S (2025). PEcAn.MA: PEcAn Functions Used Meta-Analysis. R package version 1.7.4.9000, https://pecanproject.github.io.","code":"@Manual{,   title = {PEcAn.MA: PEcAn Functions Used for Meta-Analysis},   author = {Mike Dietze and David LeBauer and Xiaohui Feng and Dan Wang and Carl Davidson and Rob Kooper and Shawn Serbin and Shashank Singh},   year = {2025},   note = {R package version 1.7.4.9000},   url = {https://pecanproject.github.io}, }"},{"path":"/index.html","id":"pecanma","dir":"","previous_headings":"","what":"PEcAn Functions Used for Meta-Analysis","title":"PEcAn Functions Used for Meta-Analysis","text":"PEcAn Functions Used Meta-Analysis","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"PEcAn Functions Used for Meta-Analysis","text":"can install development version PEcAn.MA r-universe like : can install directly GitHub remotes package like :","code":"# Enable repository from pecanproject options(repos = c(   pecanproject = 'https://pecanproject.r-universe.dev',   CRAN = 'https://cloud.r-project.org')) # Download and install PEcAn.MA in R install.packages('PEcAn.MA') library(remotes) install_github('pecanproject/pecan',  subdir = \"modules/meta.analysis\")"},{"path":"/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"PEcAn Functions Used for Meta-Analysis","text":"basic example shows solve common problem:","code":"library(PEcAn.MA) ## basic example code"},{"path":"/reference/approx.posterior.html","id":null,"dir":"Reference","previous_headings":"","what":"Approximate posterior — approx.posterior","title":"Approximate posterior — approx.posterior","text":"Approximate posterior MCMC closed form pdf","code":""},{"path":"/reference/approx.posterior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Approximate posterior — approx.posterior","text":"","code":"approx.posterior(   trait.mcmc,   priors,   trait.data = NULL,   outdir = NULL,   filename.flag = \"\" )"},{"path":"/reference/approx.posterior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Approximate posterior — approx.posterior","text":"trait.mcmc meta analysis outputs priors dataframe priors used meta analysis trait.data data used meta-analysis (used plotting) outdir directory plot results filename.flag text included posteriors.pdf filename make unique","code":""},{"path":"/reference/approx.posterior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Approximate posterior — approx.posterior","text":"posteriors data frame, similar priors, closed form pdfs fit meta-analysis results","code":""},{"path":"/reference/approx.posterior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Approximate posterior — approx.posterior","text":"returns priors posterior MCMC missing NOTE: function similar PEcAn.priors::fit.dist","code":""},{"path":"/reference/approx.posterior.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Approximate posterior — approx.posterior","text":"David LeBauer, Carl Davidson, Mike Dietze","code":""},{"path":"/reference/approx.posterior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Approximate posterior — approx.posterior","text":"","code":"if (FALSE) { # \\dontrun{   data('trait.mcmc', package = 'PEcAn.utils')   data('prior.distns', package = 'PEcAn.utils')   approx.posterior(trait.mcmc, priors = prior.distns) } # }"},{"path":"/reference/jagify.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare trait data for JAGS meta-analysis — jagify","title":"Prepare trait data for JAGS meta-analysis — jagify","text":"Convert queried data format required JAGS meta-analysis model","code":""},{"path":"/reference/jagify.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare trait data for JAGS meta-analysis — jagify","text":"","code":"jagify(result, use_ghs = TRUE)"},{"path":"/reference/jagify.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare trait data for JAGS meta-analysis — jagify","text":"result input trait data use_ghs (Logical) FALSE, exclude greenhouse data. TRUE, use data, including greenhouse data.","code":""},{"path":"/reference/jagify.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare trait data for JAGS meta-analysis — jagify","text":"result transformed meet requirements PEcAn meta-analysis model","code":""},{"path":"/reference/jagify.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Prepare trait data for JAGS meta-analysis — jagify","text":"David LeBauer","code":""},{"path":"/reference/p.point.in.prior.html","id":null,"dir":"Reference","previous_headings":"","what":"find quantile of point within prior distribution — p.point.in.prior","title":"find quantile of point within prior distribution — p.point.in.prior","text":"compare point prior distribution","code":""},{"path":"/reference/p.point.in.prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"find quantile of point within prior distribution — p.point.in.prior","text":"","code":"p.point.in.prior(point, prior)"},{"path":"/reference/p.point.in.prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"find quantile of point within prior distribution — p.point.in.prior","text":"point quantile given prior return prior list distn, parama, paramb","code":""},{"path":"/reference/p.point.in.prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"find quantile of point within prior distribution — p.point.in.prior","text":"result p<distn>(point, parama, paramb)","code":""},{"path":"/reference/p.point.in.prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"find quantile of point within prior distribution — p.point.in.prior","text":"used compare data prior, meta analysis posterior prior","code":""},{"path":"/reference/p.point.in.prior.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"find quantile of point within prior distribution — p.point.in.prior","text":"David LeBauer","code":""},{"path":"/reference/pecan.ma.html","id":null,"dir":"Reference","previous_headings":"","what":"Trait Meta-analysis — pecan.ma","title":"Trait Meta-analysis — pecan.ma","text":"Runs hierarchical meta-analysis plant trait data","code":""},{"path":"/reference/pecan.ma.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trait Meta-analysis — pecan.ma","text":"","code":"pecan.ma(   trait.data,   prior.distns,   taupriors,   j.iter,   outdir,   random = FALSE,   overdispersed = TRUE,   logfile = file.path(outdir, \"meta-analysis.log)\"),   verbose = TRUE )"},{"path":"/reference/pecan.ma.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trait Meta-analysis — pecan.ma","text":"trait.data list data.frames, one per trait data available, generated call PEcAn.DB::query.traits(), post-processed jagify(). prior.distns data.frame prior distributions generated call PEcAn.DB::query.priors() taupriors priors variance parameters, can scaled needed data mean j.iter number MCMC samples outdir output directory random use random effects, FALSE default overdispersed TRUE default, set FALSE, data mean used starting point MCMC chains (use caution) logfile Path file sinking meta analysis output. NULL, print output console. verbose Logical. TRUE (default), print progress messages. data data frame generated jagify function indexed values greenhouse, treatment, site (ghs, trt, site) well Y, SE, n observation summary statistic.","code":""},{"path":"/reference/pecan.ma.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trait Meta-analysis — pecan.ma","text":"four chains 5000 total samples posterior","code":""},{"path":"/reference/pecan.ma.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Trait Meta-analysis — pecan.ma","text":"pecan.ma runs hierarchical Bayesian meta-analytical model. model combines prior information data studies particular species group interest. Data incorporated meta-analysis include mean (Y), sample size (n), precision (obs.prec). set data includes one level treatment, comes one site, comes field greenhouse studies, variables included random (treatment, site) fixed (greenhouse) effects. pecan.ma function writes model specific data set prior using write.ma.model() function modify ma.model.template.bug generic model.","code":""},{"path":"/reference/pecan.ma.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Trait Meta-analysis — pecan.ma","text":"David LeBauer, Michael C. Dietze, Alexey Shiklomanov","code":""},{"path":"/reference/pecan.ma.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trait Meta-analysis — pecan.ma","text":"","code":"if (FALSE) { # \\dontrun{   # Setup   con <- PEcAn.DB::db.open(...)   pft <- \"temperate.Early_Hardwood\"   pft_id <- PEcAn.DB::db.query(\"SELECT id FROM pfts WHERE name = $1\", con,   values = list(pft))[[1]]   traits <- c(\"SLA\", \"Vcmax\")   trait_string <- paste(shQuote(traits), collapse = \",\")      # Load traits and priors from BETY   species <- PEcAn.DB::query.pft_species(pft, con = con)   trait.data <- PEcAn.DB::query.traits(species[[\"id\"]], c(\"SLA\", \"Vcmax\"), con = con)   prior.distns <- PEcAn.DB::query.priors(pft_id, trait_string, con = con)      # Pre-process data   jagged.data <- lapply(trait.data, PEcAn.MA::jagify)   taupriors <- list(tauA = 0.01,   tauB = c(SLA = 1000, Vcmax = 1000))   result <- pecan.ma(jagged.data, prior.distns, taupriors,                      j.iter = 5000, outdir = tempdir()) } # }"},{"path":"/reference/pecan.ma.summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate summary statistics and diagnostics for PEcAn meta.analysis — pecan.ma.summary","title":"Generate summary statistics and diagnostics for PEcAn meta.analysis — pecan.ma.summary","text":"Generate summary statistics diagnostics PEcAn meta.analysis","code":""},{"path":"/reference/pecan.ma.summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate summary statistics and diagnostics for PEcAn meta.analysis — pecan.ma.summary","text":"","code":"pecan.ma.summary(mcmc.object, pft, outdir, threshold = 1.2, gg = FALSE)"},{"path":"/reference/pecan.ma.summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate summary statistics and diagnostics for PEcAn meta.analysis — pecan.ma.summary","text":"mcmc.object JAGS mcmc output pecan.ma pft plant functional type outdir output directory threshold Gelman-Rubin convergence diagnostic (MGPRF) default = 1.2 following Bolker 2008 Ecological Models Data R gg produce extra diagnostic plots using \"ggmcmc\" package? Caution: slow!","code":""},{"path":"/reference/pecan.ma.summary.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Generate summary statistics and diagnostics for PEcAn meta.analysis — pecan.ma.summary","text":"David LeBauer, Shawn Serbin","code":""},{"path":"/reference/pecan.ma.summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate summary statistics and diagnostics for PEcAn meta.analysis — pecan.ma.summary","text":"","code":"if (FALSE) { # \\dontrun{ summary <- pecan.ma.summary(  trait.mcmc,  settings$pfts$pft,  settings$outdir,  settings$meta.analysis$threshold) } # }"},{"path":"/reference/rename_jags_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Renames the variables within output data frame trait.data — rename_jags_columns","title":"Renames the variables within output data frame trait.data — rename_jags_columns","text":"Renames variables within output data frame trait.data","code":""},{"path":"/reference/rename_jags_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Renames the variables within output data frame trait.data — rename_jags_columns","text":"","code":"rename_jags_columns(data)"},{"path":"/reference/rename_jags_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Renames the variables within output data frame trait.data — rename_jags_columns","text":"data data frame variables rename","code":""},{"path":[]},{"path":"/reference/rename_jags_columns.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Renames the variables within output data frame trait.data — rename_jags_columns","text":"David LeBauer","code":""},{"path":"/reference/run.meta.analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Run meta analysis — run.meta.analysis","title":"Run meta analysis — run.meta.analysis","text":"use following items settings: settings$pfts settings$database$bety settings$database$dbfiles settings$meta.analysis$update","code":""},{"path":"/reference/run.meta.analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run meta analysis — run.meta.analysis","text":"","code":"run.meta.analysis(   pfts,   iterations,   random = TRUE,   threshold = 1.2,   dbfiles,   database,   use_ghs = TRUE,   update = FALSE )"},{"path":"/reference/run.meta.analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run meta analysis — run.meta.analysis","text":"pfts list pfts get traits iterations number iterations mcmc analysis random random effects used? threshold Gelman-Rubin convergence diagnostic, passed pecan.ma.summary dbfiles location previous results found database database connection parameters use_ghs exclude greenhouse data TRUE update logical: Rerun meta-analysis result files already exist?","code":""},{"path":"/reference/run.meta.analysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run meta analysis — run.meta.analysis","text":"nothing, side effect saves trait.mcmc created pecan.ma post.distns created approx.posterior(trait.mcmc, ...)  trait.mcmc.Rdata post.distns.Rdata, respectively","code":""},{"path":"/reference/run.meta.analysis.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Run meta analysis — run.meta.analysis","text":"Shawn Serbin, David LeBauer","code":""},{"path":"/reference/runModule.run.meta.analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Run meta-analysis on all PFTs in a (list of) PEcAn settings — runModule.run.meta.analysis","title":"Run meta-analysis on all PFTs in a (list of) PEcAn settings — runModule.run.meta.analysis","text":"Run meta-analysis PFTs (list ) PEcAn settings","code":""},{"path":"/reference/runModule.run.meta.analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run meta-analysis on all PFTs in a (list of) PEcAn settings — runModule.run.meta.analysis","text":"","code":"runModule.run.meta.analysis(settings)"},{"path":"/reference/runModule.run.meta.analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run meta-analysis on all PFTs in a (list of) PEcAn settings — runModule.run.meta.analysis","text":"settings PEcAn settings MultiSettings object","code":""},{"path":"/reference/runModule.run.meta.analysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run meta-analysis on all PFTs in a (list of) PEcAn settings — runModule.run.meta.analysis","text":"list PFTs, invisibly; saves MA results settings$pft$outdir side effect","code":""},{"path":"/reference/single.MA.html","id":null,"dir":"Reference","previous_headings":"","what":"Single MA — single.MA","title":"Single MA — single.MA","text":"Individual Meta-analysis","code":""},{"path":"/reference/single.MA.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Single MA — single.MA","text":"","code":"single.MA(   data,   j.chains,   j.iter,   tauA,   tauB,   prior,   jag.model.file,   overdispersed = TRUE )"},{"path":"/reference/single.MA.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Single MA — single.MA","text":"data data frame generated jagify function indexed values greenhouse, treatment, site (ghs, trt, site) well Y, SE, n observation summary statistic. j.chains number chains meta-analysis j.iter number mcmc samples tauA prior variance parameters tauB prior variance parameters prior data.frame columns named 'distn', 'parama', 'paramb' e.g. prior <- data.frame(distn = 'weibull', parama = 0.5, paramb = 10, n = 1) jag.model.file file model written overdispersed TRUE (default), chains start overdispersed locations parameter space (recommended)","code":""},{"path":"/reference/single.MA.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Single MA — single.MA","text":"jags., mcmc.object results meta-analysis","code":""},{"path":"/reference/single.MA.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Single MA — single.MA","text":"Individual meta-analysis specific trait PFT run function single.MA. allow power analysis  run repeated MA outside full loop traits PFTs.","code":""},{"path":"/reference/single.MA.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Single MA — single.MA","text":"David LeBauer, Michael C. Dietze","code":""},{"path":"/reference/transform.nas.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to remove NA values from database queries — transform.nas","title":"Function to remove NA values from database queries — transform.nas","text":"Transform NA values data exported BETYdb","code":""},{"path":"/reference/transform.nas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to remove NA values from database queries — transform.nas","text":"","code":"# S3 method for class 'nas' transform(data)"},{"path":"/reference/transform.nas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to remove NA values from database queries — transform.nas","text":"data input data","code":""},{"path":"/reference/transform.nas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to remove NA values from database queries — transform.nas","text":"data frame NAs sensibly replaced","code":""},{"path":"/reference/write.ma.model.html","id":null,"dir":"Reference","previous_headings":"","what":"write.ma.model — write.ma.model","title":"write.ma.model — write.ma.model","text":"Convert template ma.model.template.R JAGS model.","code":""},{"path":"/reference/write.ma.model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"write.ma.model — write.ma.model","text":"","code":"write.ma.model(   modelfile,   outfile,   reg.model,   pr.dist,   pr.param.a,   pr.param.b,   n,   trt.n,   site.n,   ghs.n,   tauA,   tauB )"},{"path":"/reference/write.ma.model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"write.ma.model — write.ma.model","text":"modelfile model template file (ma.model.template.R) outfile file name model created reg.model structure regression model pr.dist string representing root distribution name used R, e.g. 'norm', 'lnorm', 'gamma', 'beta', etc. pr.param.first parameter value accepted pr.dist pr.param.b second parameter value accepted pr.dist n number observations data trt.n number distinct treatments data site.n number distinct sites data ghs.n = 1 non-greenhouse greenhouse studies included, 2 tauA parameter gamma prior precision tauB parameter b gamma prior precision","code":""},{"path":"/reference/write.ma.model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"write.ma.model — write.ma.model","text":"Nothing, side effect, model written","code":""},{"path":"/reference/write.ma.model.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"write.ma.model — write.ma.model","text":"Writes meta-analysis model based available data prior specification. Inspired R2WinBUGS::write.model Jouni Kerman Uwe Ligges.","code":""},{"path":"/reference/write.ma.model.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"write.ma.model — write.ma.model","text":"David LeBauer Mike Dietze.","code":""},{"path":[]},{"path":"/news/index.html","id":"license-change-1-7-4","dir":"Changelog","previous_headings":"","what":"License change","title":"PEcAn.MA 1.7.4","text":"PEcAn.MA now distributed BSD three-clause license instead NCSA Open Source license.","code":""},{"path":"/news/index.html","id":"pecanma-171","dir":"Changelog","previous_headings":"","what":"PEcAn.MA 1.7.1","title":"PEcAn.MA 1.7.1","text":"changes 1.7.1 earlier recorded single file PEcAn packages; please see https://github.com/PecanProject/pecan/blob/v1.7.1/CHANGELOG.md details.","code":""}]
