<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare L4A GEDI above ground biomass (AGB) data for the state data assimilation (SDA) workflow. — GEDI_AGB_prep • PEcAn.data.remote</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare L4A GEDI above ground biomass (AGB) data for the state data assimilation (SDA) workflow. — GEDI_AGB_prep"><meta name="description" content="Prepare L4A GEDI above ground biomass (AGB) data for the state data assimilation (SDA) workflow."><meta property="og:description" content="Prepare L4A GEDI above ground biomass (AGB) data for the state data assimilation (SDA) workflow."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PEcAn.data.remote</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.1</small>

    <a href="../index.html" style="padding: 0em 1em">← Up</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare L4A GEDI above ground biomass (AGB) data for the state data assimilation (SDA) workflow.</h1>
      <small class="dont-index">Source: <a href="https://github.com/PecanProject/pecan/blob/develop/modules/data.remote/R/GEDI_AGB_prep.R" class="external-link"><code>R/GEDI_AGB_prep.R</code></a></small>
      <div class="d-none name"><code>GEDI_AGB_prep.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prepare L4A GEDI above ground biomass (AGB) data for the state data assimilation (SDA) workflow.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">GEDI_AGB_prep</span><span class="op">(</span></span>
<span>  <span class="va">site_info</span>,</span>
<span>  <span class="va">time_points</span>,</span>
<span>  outdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"GEDI_AGB"</span><span class="op">)</span>,</span>
<span>  buffer <span class="op">=</span> <span class="fl">0.005</span>,</span>
<span>  search_window <span class="op">=</span> <span class="st">"6 month"</span>,</span>
<span>  bbox <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  batch <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  prerun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  num.folder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cores <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  credential_path <span class="op">=</span> <span class="st">"~/.netrc"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-site-info">site_info<a class="anchor" aria-label="anchor" href="#arg-site-info"></a></dt>
<dd><p>List: A list including site_id, longitude, and latitude.</p></dd>


<dt id="arg-time-points">time_points<a class="anchor" aria-label="anchor" href="#arg-time-points"></a></dt>
<dd><p>Character: A vector of date contains target dates (in YYYY-MM-DD).</p></dd>


<dt id="arg-outdir">outdir<a class="anchor" aria-label="anchor" href="#arg-outdir"></a></dt>
<dd><p>Character: Directory where the final CSV file will be stored.</p></dd>


<dt id="arg-buffer">buffer<a class="anchor" aria-label="anchor" href="#arg-buffer"></a></dt>
<dd><p>Numeric: buffer distance (in degrees) for locate GEDI AGB searching box (default is 0.005 [~ 500 m]).</p></dd>


<dt id="arg-search-window">search_window<a class="anchor" aria-label="anchor" href="#arg-search-window"></a></dt>
<dd><p>Character: search window (any length of time. e.g., 6 month) for locate available GEDI AGB values.</p></dd>


<dt id="arg-bbox">bbox<a class="anchor" aria-label="anchor" href="#arg-bbox"></a></dt>
<dd><p>Numeric: the vector (in xmin, xmax, ymin, and ymax) that covers all the sites in the site_info object (default is NULL).</p></dd>


<dt id="arg-batch">batch<a class="anchor" aria-label="anchor" href="#arg-batch"></a></dt>
<dd><p>Boolean: determine if we want to submit jobs to the queue or not (default is FALSE).</p></dd>


<dt id="arg-prerun">prerun<a class="anchor" aria-label="anchor" href="#arg-prerun"></a></dt>
<dd><p>Character: series of pre-launch shell command before running the shell job (default is NULL).</p></dd>


<dt id="arg-num-folder">num.folder<a class="anchor" aria-label="anchor" href="#arg-num-folder"></a></dt>
<dd><p>Numeric: the number of batch folders to be created when submitting jobs to the queue.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>Numeric: numbers of core to be used for the parallel computation. The default is the maximum current CPU number.</p></dd>


<dt id="arg-credential-path">credential_path<a class="anchor" aria-label="anchor" href="#arg-credential-path"></a></dt>
<dd><p>Character: the physical path to the credential file. (.netrc).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing AGB and sd for each site and each time step.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>During the first use, users will need to create the
 `.nasadaacapirc` file in the out folder where the first and second lines
 are the username and password on the NASA Earth Explore server.
 If you don't have an account, register at https://urs.earthdata.nasa.gov/users/new.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Dongchen Zhang</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">settings</span> <span class="op">&lt;-</span> <span class="fu">PEcAn.settings</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/PEcAn.settings/man/read.settings.html" class="external-link">read.settings</a></span><span class="op">(</span><span class="st">"pecan.xml"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">site_info</span> <span class="op">&lt;-</span> <span class="va">settings</span> <span class="op">%&gt;%</span> </span></span>
<span class="r-in"><span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="op">~</span><span class="va">.x</span><span class="op">[[</span><span class="st">'run'</span><span class="op">]</span><span class="op">]</span> <span class="op">)</span> <span class="op">%&gt;%</span> </span></span>
<span class="r-in"><span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="st">'site'</span><span class="op">)</span><span class="op">%&gt;%</span> </span></span>
<span class="r-in"><span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">site.list</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co">#conversion from string to number</span></span></span>
<span class="r-in"><span>    <span class="va">site.list</span><span class="op">$</span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">site.list</span><span class="op">$</span><span class="va">lat</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">site.list</span><span class="op">$</span><span class="va">lon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">site.list</span><span class="op">$</span><span class="va">lon</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>site_id<span class="op">=</span><span class="va">site.list</span><span class="op">$</span><span class="va">id</span>, lat<span class="op">=</span><span class="va">site.list</span><span class="op">$</span><span class="va">lat</span>, lon<span class="op">=</span><span class="va">site.list</span><span class="op">$</span><span class="va">lon</span>, site_name<span class="op">=</span><span class="va">site.list</span><span class="op">$</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span> <span class="op">%&gt;%</span> </span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">time_points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">start.date</span>, <span class="va">end.date</span>, by <span class="op">=</span> <span class="va">time.step</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">buffer</span> <span class="op">&lt;-</span> <span class="fl">0.005</span></span></span>
<span class="r-in"><span><span class="va">outdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">GEDI_AGB</span> <span class="op">&lt;-</span> <span class="fu">GEDI_AGB_prep</span><span class="op">(</span><span class="va">site_info</span>, <span class="va">time_points</span>, <span class="va">outdir</span>, <span class="va">buffer</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Dietze, Bailey Morrison.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

