<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>align.met — align.met • PEcAn.data.atmosphere</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="align.met — align.met"><meta name="description" content="This script aligns meteorology datasets in at temporal resolution for debiasing &amp;amp;
             temporal downscaling.
             Note: The output here is stored in memory!
             Note: can probably at borrow from or adapt align_data.R in Benchmarking module, but
             it's too much of a black box at the moment."><meta property="og:description" content="This script aligns meteorology datasets in at temporal resolution for debiasing &amp;amp;
             temporal downscaling.
             Note: The output here is stored in memory!
             Note: can probably at borrow from or adapt align_data.R in Benchmarking module, but
             it's too much of a black box at the moment."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PEcAn.data.atmosphere</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.1.9000</small>

    <a href="../index.html" style="padding: 0em 1em">← Up</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ameriflux_demo.html">PEcAn: Importing Met data from Bondville, IL Ameriflux station</a></li>
    <li><a class="dropdown-item" href="../articles/cfmet_downscaling.html">Met Downscaling</a></li>
    <li><a class="dropdown-item" href="../articles/compare_narr_cruncep_met.html">Comparing met data from various sources</a></li>
    <li><a class="dropdown-item" href="../articles/tdm_downscaling.html">Temporally Downscale Meteorology</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>align.met</h1>
      <small class="dont-index">Source: <a href="https://github.com/PecanProject/pecan/blob/develop/modules/data.atmosphere/R/align_met.R" class="external-link"><code>R/align_met.R</code></a></small>
      <div class="d-none name"><code>align.met.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This script aligns meteorology datasets in at temporal resolution for debiasing &amp;
             temporal downscaling.
             Note: The output here is stored in memory!
             Note: can probably at borrow from or adapt align_data.R in Benchmarking module, but
             it's too much of a black box at the moment.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">align.met</span><span class="op">(</span></span>
<span>  <span class="va">train.path</span>,</span>
<span>  <span class="va">source.path</span>,</span>
<span>  yrs.train <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  yrs.source <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n.ens <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pair.mems <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mems.train <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  print.progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-train-path">train.path<a class="anchor" aria-label="anchor" href="#arg-train-path"></a></dt>
<dd><p>- path to the dataset to be used to downscale the data</p></dd>


<dt id="arg-source-path">source.path<a class="anchor" aria-label="anchor" href="#arg-source-path"></a></dt>
<dd><p>- data to be bias-corrected aligned with training data (from align.met)</p></dd>


<dt id="arg-yrs-train">yrs.train<a class="anchor" aria-label="anchor" href="#arg-yrs-train"></a></dt>
<dd><p>- (optional) specify a specific years to be loaded for the training data;
prevents needing to load the entire dataset.  If NULL, all available years
will be loaded. If not null, should be a vector of numbers (so you can skip
problematic years)</p></dd>


<dt id="arg-yrs-source">yrs.source<a class="anchor" aria-label="anchor" href="#arg-yrs-source"></a></dt>
<dd><p>- (optional) specify a specific years to be loaded for the source data;
prevents needing to load the entire dataset.  If NULL, all available years
will be loaded. If not null, should be a vector of numbers (so you can skip
problematic years)</p></dd>


<dt id="arg-n-ens">n.ens<a class="anchor" aria-label="anchor" href="#arg-n-ens"></a></dt>
<dd><p>- number of ensemble members to generate and save</p></dd>


<dt id="arg-pair-mems">pair.mems<a class="anchor" aria-label="anchor" href="#arg-pair-mems"></a></dt>
<dd><p>- logical stating whether ensemble members should be paired in
the case where ensembles are being read in in both the training and source data</p></dd>


<dt id="arg-mems-train">mems.train<a class="anchor" aria-label="anchor" href="#arg-mems-train"></a></dt>
<dd><p>- (optional) string of ensemble identifiers that ensure the training data is read
in a specific order to ensure consistent time series &amp; proper error propagation.
If null, members of the training data ensemble will be randomly selected and
ordered.  Specifying the ensemble members IDs (e.g. CCSM_001, CCSM_002) will
ensure ensemble members are properly identified and combined.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>- specify seed so that random draws can be reproduced</p></dd>


<dt id="arg-print-progress">print.progress<a class="anchor" aria-label="anchor" href="#arg-print-progress"></a></dt>
<dd><p>- if TRUE, prints progress bar</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>2-layered list (stored in memory) containing the training and source data that are now matched
        in temporal resolution have the specified number of ensemble members
         - dat.train (training dataset) and dat.source (source data to be downscaled or bias-corrected)
           are both lists that contain separate data frames for time indices and all available met
           variables with ensemble members in columns</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Align meteorology datasets for debiasing</p>
<p>1. Assumes that both the training and source data are in *at least* daily resolution
            and each dataset is in a consistent temporal resolution being read from a single file
            (CF/Pecan format).  For example, CMIP5 historical/p1000 runs where radiation drivers
            are in monthly resolution and temperature is in daily will need to be reconciled using
            one of the "met2CF" or "download" or "extract" functions
         2. Default file structure: Ensembles members for a given site or set of simes are housed
            in a common folder with the site ID.  Right now everything is based off of Christy's
            PalEON ensemble ID scheme where the site ID is a character string (e.g. HARVARD) followed
            the SOURCE data family (i.e. GCM) as a string and then the ensemble member ID as a number
            (e.g. 001).  For example, the file path for a single daily ensemble member for PalEON is:
            "~/Desktop/Research/met_ensembles/data/met_ensembles/HARVARD/day/ensembles/bcc-csm1-1_004"
            with each year in a separate netcdf file inside of it.  "bcc-csm1-1_004" is an example of
            an ensemnle member ID that might be used if you are specifying mems.train.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other debias - Debias &amp; Align Meteorology Datasets into continuous time series:
<code><a href="debias.met.regression.html">debias.met.regression</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Christy Rollinson</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Dietze, David LeBauer, Carl Davidson, Rob Kooper, Deepak Jaiswal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

