<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Subdaily Models — gen.subdaily.models • PEcAn.data.atmosphere</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Subdaily Models — gen.subdaily.models"><meta name="description" content='Create statistical models to predict subdaily meteorology
This is the 2nd function in the tdm workflow that takes the dat.train_file that is created from the
             nc2dat.train function and generates "lag.days" and "next.days". These variables pass along information
             of the previous time step and provides a preview of the next time step. After these variables are created,
             the models are generated by calling the tdm_temporal_downscale_functions.R scripts and these models
             and betas are saved separately. Please note that these models and betas require a significant
             amount of space. The storage required varies by the size of the training dataset, but prepare for
             &amp;gt;100 GB. These will be called later in tdm_predict_subdaily_met to perform the linear regression
             analysis.'><meta property="og:description" content='Create statistical models to predict subdaily meteorology
This is the 2nd function in the tdm workflow that takes the dat.train_file that is created from the
             nc2dat.train function and generates "lag.days" and "next.days". These variables pass along information
             of the previous time step and provides a preview of the next time step. After these variables are created,
             the models are generated by calling the tdm_temporal_downscale_functions.R scripts and these models
             and betas are saved separately. Please note that these models and betas require a significant
             amount of space. The storage required varies by the size of the training dataset, but prepare for
             &amp;gt;100 GB. These will be called later in tdm_predict_subdaily_met to perform the linear regression
             analysis.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PEcAn.data.atmosphere</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.1.9000</small>

    <a href="../index.html" style="padding: 0em 1em">← Up</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ameriflux_demo.html">PEcAn: Importing Met data from Bondville, IL Ameriflux station</a></li>
    <li><a class="dropdown-item" href="../articles/cfmet_downscaling.html">Met Downscaling</a></li>
    <li><a class="dropdown-item" href="../articles/compare_narr_cruncep_met.html">Comparing met data from various sources</a></li>
    <li><a class="dropdown-item" href="../articles/tdm_downscaling.html">Temporally Downscale Meteorology</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate Subdaily Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/PecanProject/pecan/blob/develop/modules/data.atmosphere/R/tdm_generate_subdaily_models.R" class="external-link"><code>R/tdm_generate_subdaily_models.R</code></a></small>
      <div class="d-none name"><code>gen.subdaily.models.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create statistical models to predict subdaily meteorology
This is the 2nd function in the tdm workflow that takes the dat.train_file that is created from the
             nc2dat.train function and generates "lag.days" and "next.days". These variables pass along information
             of the previous time step and provides a preview of the next time step. After these variables are created,
             the models are generated by calling the tdm_temporal_downscale_functions.R scripts and these models
             and betas are saved separately. Please note that these models and betas require a significant
             amount of space. The storage required varies by the size of the training dataset, but prepare for
             &gt;100 GB. These will be called later in tdm_predict_subdaily_met to perform the linear regression
             analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gen.subdaily.models</span><span class="op">(</span></span>
<span>  <span class="va">outfolder</span>,</span>
<span>  <span class="va">path.train</span>,</span>
<span>  <span class="va">yrs.train</span>,</span>
<span>  direction.filter <span class="op">=</span> <span class="st">"forward"</span>,</span>
<span>  <span class="va">in.prefix</span>,</span>
<span>  <span class="va">n.beta</span>,</span>
<span>  <span class="va">day.window</span>,</span>
<span>  seed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  resids <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n.cores <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  print.progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-outfolder">outfolder<a class="anchor" aria-label="anchor" href="#arg-outfolder"></a></dt>
<dd><p>- directory where models will be stored *** storage required varies by size of training dataset, but prepare for &gt;10 GB</p></dd>


<dt id="arg-path-train">path.train<a class="anchor" aria-label="anchor" href="#arg-path-train"></a></dt>
<dd><p>- path to CF/PEcAn style training data where each year is in a separate file.</p></dd>


<dt id="arg-yrs-train">yrs.train<a class="anchor" aria-label="anchor" href="#arg-yrs-train"></a></dt>
<dd><p>- which years of the training data should be used for to generate the model for
the subdaily cycle.  If NULL, will default to all years</p></dd>


<dt id="arg-direction-filter">direction.filter<a class="anchor" aria-label="anchor" href="#arg-direction-filter"></a></dt>
<dd><p>- Whether the model will be filtered backward or forward in time. options = c("backward", "forward")
(PalEON will go backward, anybody interested in the future will go forward)</p></dd>


<dt id="arg-in-prefix">in.prefix<a class="anchor" aria-label="anchor" href="#arg-in-prefix"></a></dt>
<dd><p>not used</p></dd>


<dt id="arg-n-beta">n.beta<a class="anchor" aria-label="anchor" href="#arg-n-beta"></a></dt>
<dd><p>- number of betas to save from linear regression model</p></dd>


<dt id="arg-day-window">day.window<a class="anchor" aria-label="anchor" href="#arg-day-window"></a></dt>
<dd><p>- integer specifying number of days around the day being modeled you want to use data from for that
specific hours coefficients. Must be integer because we want statistics from the same time of day
for each day surrounding the model day</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>- seed for randomization to allow for reproducible results</p></dd>


<dt id="arg-resids">resids<a class="anchor" aria-label="anchor" href="#arg-resids"></a></dt>
<dd><p>- logical stating whether to pass on residual data or not (this increases both memory &amp; storage requirements)</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>- logical stating whether to run temporal_downscale_functions.R in parallel</p></dd>


<dt id="arg-n-cores">n.cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>- deals with parallelization</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>logical: replace output file if it already exists?</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical, currently ignored</p></dd>


<dt id="arg-print-progress">print.progress<a class="anchor" aria-label="anchor" href="#arg-print-progress"></a></dt>
<dd><p>- print progress bar? (gets passed through)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other tdm - Temporally Downscale Meteorology:
<code><a href="lm_ensemble_sims.html">lm_ensemble_sims</a>()</code>,
<code><a href="model.train.html">model.train</a>()</code>,
<code><a href="nc.merge.html">nc.merge</a>()</code>,
<code><a href="predict_subdaily_met.html">predict_subdaily_met</a>()</code>,
<code><a href="save.betas.html">save.betas</a>()</code>,
<code><a href="save.model.html">save.model</a>()</code>,
<code><a href="subdaily_pred.html">subdaily_pred</a>()</code>,
<code><a href="temporal.downscale.functions.html">temporal.downscale.functions</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Christy Rollinson, James Simkins</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Dietze, David LeBauer, Carl Davidson, Rob Kooper, Deepak Jaiswal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

