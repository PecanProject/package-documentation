<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PEcAn Functions Used for Managing Climate Driver Data • PEcAn.data.atmosphere</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="PEcAn Functions Used for Managing Climate Driver Data">
<meta name="description" content="The Predictive Ecosystem Carbon Analyzer (PEcAn) is a scientific workflow management tool that is designed to simplify the management of model parameterization, execution, and analysis. The PECAn.data.atmosphere package converts climate driver data into a standard format for models integrated into PEcAn. As a standalone package, it provides an interface to access diverse climate data sets.">
<meta property="og:description" content="The Predictive Ecosystem Carbon Analyzer (PEcAn) is a scientific workflow management tool that is designed to simplify the management of model parameterization, execution, and analysis. The PECAn.data.atmosphere package converts climate driver data into a standard format for models integrated into PEcAn. As a standalone package, it provides an interface to access diverse climate data sets.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">PEcAn.data.atmosphere</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.1.9000</small>

    <a href="../index.html" style="padding: 0em 1em">← Up</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/ameriflux_demo.html">PEcAn: Importing Met data from Bondville, IL Ameriflux station</a></li>
    <li><a class="dropdown-item" href="articles/cfmet_downscaling.html">Met Downscaling</a></li>
    <li><a class="dropdown-item" href="articles/compare_narr_cruncep_met.html">Comparing met data from various sources</a></li>
    <li><a class="dropdown-item" href="articles/tdm_downscaling.html">Temporally Downscale Meteorology</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="pecan-functions-for-processing-meteorological-data">PEcAn functions for processing meteorological data<a class="anchor" aria-label="anchor" href="#pecan-functions-for-processing-meteorological-data"></a>
</h1></div>
<p>Converts meteorological products to PEcAn-CF formated netCDF files.</p>
<div class="section level2">
<h2 id="supported-formats">Supported Formats<a class="anchor" aria-label="anchor" href="#supported-formats"></a>
</h2>
<p>Current list of input meteorological formats supported, functions are named <code>download.&lt;source&gt;</code> and <code>met2CF.&lt;source&gt;</code>.</p>
<ul>
<li>NCEP</li>
<li>NARR</li>
<li>Ameriflux</li>
<li>FACE</li>
<li>ALMA</li>
<li>NOAA GEFS</li>
<li>arbitrary csv files</li>
<li>ICOS</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"pecanproject/pecan/modules/data.atmosphere"</span><span class="op">)</span></span></code></pre></div>
<p>The PEcAn.data.atmosphere package is ‘standalone’.</p>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<ul>
<li><a href="https://pecanproject.github.io/package-documentation/develop/data.atmosphere/index.html" class="external-link">Package Documentation</a></li>
<li>Vignettes</li>
</ul>
</div>
<div class="section level2">
<h2 id="pecan-variable-names">PEcAn variable names<a class="anchor" aria-label="anchor" href="#pecan-variable-names"></a>
</h2>
<p>For the most updated list, see <a href="https://pecanproject.github.io/pecan-documentation/develop/input-standards.html#input-standards" class="external-link uri">https://pecanproject.github.io/pecan-documentation/develop/input-standards.html#input-standards</a></p>
<p>General Note: dates in the database should be datatime (preferably with timezone), and datetime passed around in PEcAn should be of type POSIXlt.</p>
</div>
<div class="section level2">
<h2 id="met-data">Met Data<a class="anchor" aria-label="anchor" href="#met-data"></a>
</h2>
<p>The standard met data inputs should be of the form:</p>
<p>Converters from a raw to standard format go in <code>/modules/data.atmosphere/R</code>; converters from standard to model-specific go in <code>models/&lt;mymodel&gt;/R</code>.</p>
<ul>
<li>For a number of common gridded products (NARR, CRUNCEP, ISIMIP), there are bash scripts for converting and rechunking in this repository: <a href="https://github.com/ebimodeling/model-drivers" class="external-link uri">https://github.com/ebimodeling/model-drivers</a>; these are not generalized, but may be merged into PEcAn at some point.</li>
</ul>
<p>Examples: * NARR: * CRUNCEP: * ISIMIP:</p>
<p>Names should be <code>met2CF.&lt;sourcename&gt;</code> and <code>met2model.&lt;modelname&gt;</code>.</p>
</div>
<div class="section level2">
<h2 id="dimensions">Dimensions:<a class="anchor" aria-label="anchor" href="#dimensions"></a>
</h2>
<table class="table">
<thead><tr>
<th align="left">CF standard-name</th>
<th align="left">units</th>
</tr></thead>
<tbody>
<tr>
<td align="left">time</td>
<td align="left">days since 1700-01-01 00:00:00 UTC</td>
</tr>
<tr>
<td align="left">longitude</td>
<td align="left">degrees_east</td>
</tr>
<tr>
<td align="left">latitude</td>
<td align="left">degrees_north</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="the-variable-names-should-be-standard_name">The variable names should be <code>standard_name</code>
<a class="anchor" aria-label="anchor" href="#the-variable-names-should-be-standard_name"></a>
</h2>
<table style="width:100%;" class="table">
<colgroup>
<col width="40%">
<col width="6%">
<col width="13%">
<col width="13%">
<col width="8%">
<col width="6%">
<col width="10%">
</colgroup>
<thead><tr>
<th align="left">CF standard-name</th>
<th align="left">units</th>
<th align="left">bety</th>
<th align="left">isimip</th>
<th align="left">cruncep</th>
<th align="left">narr</th>
<th align="left">ameriflux</th>
</tr></thead>
<tbody>
<tr>
<td align="left"><strong>air_temperature</strong></td>
<td align="left">K</td>
<td align="left">airT</td>
<td align="left">tasAdjust</td>
<td align="left">tair</td>
<td align="left">air</td>
<td align="left">TA (C)</td>
</tr>
<tr>
<td align="left">air_temperature_max</td>
<td align="left">K</td>
<td align="left"></td>
<td align="left">tasmaxAdjust</td>
<td align="left">NA</td>
<td align="left">tmax</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">air_temperature_min</td>
<td align="left">K</td>
<td align="left"></td>
<td align="left">tasminAdjust</td>
<td align="left">NA</td>
<td align="left">tmin</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>air_pressure</strong></td>
<td align="left">Pa</td>
<td align="left">air_pressure</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">PRESS (KPa)</td>
</tr>
<tr>
<td align="left">mole_fraction_of_carbon_dioxide_in_air</td>
<td align="left">mol/mol</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CO2</td>
</tr>
<tr>
<td align="left">moisture_content_of_soil_layer</td>
<td align="left">kg m-2</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">soil_temperature</td>
<td align="left">K</td>
<td align="left">soilT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">TS1 <em>(NOT DONE)</em>
</td>
</tr>
<tr>
<td align="left">relative_humidity</td>
<td align="left">%</td>
<td align="left">relative_humidity</td>
<td align="left">rhurs</td>
<td align="left">NA</td>
<td align="left">rhum</td>
<td align="left">RH</td>
</tr>
<tr>
<td align="left"><strong>specific_humidity</strong></td>
<td align="left">1</td>
<td align="left">specific_humidity</td>
<td align="left">NA</td>
<td align="left">qair</td>
<td align="left">shum</td>
<td align="left">CALC(RH)</td>
</tr>
<tr>
<td align="left">water_vapor_saturation_deficit</td>
<td align="left">Pa</td>
<td align="left">VPD</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">VPD <em>(NOT DONE)</em>
</td>
</tr>
<tr>
<td align="left"><strong>surface_downwelling_longwave_flux_in_air</strong></td>
<td align="left">W m-2</td>
<td align="left">same</td>
<td align="left">rldsAdjust</td>
<td align="left">lwdown</td>
<td align="left">dlwrf</td>
<td align="left">Rgl</td>
</tr>
<tr>
<td align="left"><strong>surface_downwelling_shortwave_flux_in_air</strong></td>
<td align="left">W m-2</td>
<td align="left">solar_radiation</td>
<td align="left">rsdsAdjust</td>
<td align="left">swdown</td>
<td align="left">dswrf</td>
<td align="left">Rg</td>
</tr>
<tr>
<td align="left">surface_downwelling_photosynthetic_photon_flux_in_air</td>
<td align="left">mol m-2 s-1</td>
<td align="left">PAR</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">PAR <em>(NOT DONE)</em>
</td>
</tr>
<tr>
<td align="left"><strong>precipitation_flux</strong></td>
<td align="left">kg m-2 s-1</td>
<td align="left">cccc</td>
<td align="left">prAdjust</td>
<td align="left">rain</td>
<td align="left">acpc</td>
<td align="left">PREC (mm/s)</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">degrees</td>
<td align="left">wind_direction</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">WD</td>
</tr>
<tr>
<td align="left">wind_speed</td>
<td align="left">m/s</td>
<td align="left">Wspd</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">WS</td>
</tr>
<tr>
<td align="left"><strong>eastward_wind</strong></td>
<td align="left">m/s</td>
<td align="left">eastward_wind</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CALC(WS+WD)</td>
</tr>
<tr>
<td align="left"><strong>northward_wind</strong></td>
<td align="left">m/s</td>
<td align="left">northward_wind</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CALC(WS+WD)</td>
</tr>
</tbody>
</table>
<ul>
<li>preferred variables indicated in bold</li>
<li>wind_direction has no CF equivalent and should not be converted, instead the met2CF functions should convert wind_direction and wind_speed to eastward_wind and northward_wind</li>
<li>variable names are from <a href="http://nacp.ornl.gov/MsTMIP_variables.shtml" class="external-link">MsTMIP</a>, but lowercase to be consistent with the MsTMIP drivers.</li>
<li>standard_name is CF-convention standard names</li>
<li>units can be converted by udunits, so these can vary (e.g. the time denominator may change with time frequency of inputs)</li>
<li>soil moisture for the full column, rather than a layer, is soil_moisture_content</li>
</ul>
<p>For the standardized files, we are using CF standard names as variable names.</p>
<p>For example, in the <a href="https://www.betydb.org/inputs/280" class="external-link">MsTMIP-CRUNCEP</a> data, the variable <code>rain</code> should be <code>precipitation_rate</code>. We want to standardize the units as well as part of the <code>met2CF.&lt;product&gt;</code> step. I believe we want to use the CF “canonical” units but retain the MsTMIP units any time CF is ambiguous about the units.</p>
<p>The key is to process each type of met data (site, reanalysis, forecast, climate scenario, etc) to the exact same standard. This way every operation after that (extract, gap fill, downscale, convert to a model, etc) will always have the exact same inputs. This will make everything else much simpler to code and allow us to avoid a lot of unnecessary data checking, tests, etc being repeated in every downstream function.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/PecanProject/pecan/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/BSD-3-Clause" class="external-link">BSD_3_clause</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing PEcAn.data.atmosphere</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mike Dietze <br><small class="roles"> Author </small>  </li>
<li>David LeBauer <br><small class="roles"> Author, maintainer </small>  </li>
<li>Carl Davidson <br><small class="roles"> Author </small>  </li>
<li>Rob Kooper <br><small class="roles"> Author </small>  </li>
<li>Deepak Jaiswal <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Dietze, David LeBauer, Carl Davidson, Rob Kooper, Deepak Jaiswal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
