[{"path":"/articles/AssimBatchVignette.html","id":"install-package-from-github","dir":"Articles","previous_headings":"","what":"Install package from Github","title":"PEcAn.assim.batch Vignette","text":"needs done first time :","code":"library(devtools) install_github(\"PecanProject/pecan\", subdir=\"all\")"},{"path":"/articles/AssimBatchVignette.html","id":"parameter-data-assimilation-a-k-a--calibration-in-pecan","dir":"Articles","previous_headings":"","what":"Parameter Data Assimilation (a.k.a. calibration) in PEcAn","title":"PEcAn.assim.batch Vignette","text":"Currently, three ways Parameter Data Assimilation (PDA) PEcAn : bayesian.tools (bruteforce algorithms) emulator multi-site hierarchical PDA (HPDA) emulators Note , used Metropolis-Hastings Markov Chain Monte Carlo (MCMC) algorithms implemented natively PEcAn, namely /modules/assim.batch/R/pda.mcmc.R pda.mcmc.bs.R. deprecated longer maintained.","code":""},{"path":"/articles/AssimBatchVignette.html","id":"which-one-to-use","dir":"Articles","previous_headings":"Parameter Data Assimilation (a.k.a. calibration) in PEcAn","what":"Which one to use?","title":"PEcAn.assim.batch Vignette","text":"bayesian.tools : pda.bayesian.tools.R main script PDA workflow performs bruteforce (MCMC methods require running models least couple thousand times) calibration. script uses BayesianTools R-package (Hartig, Minuno Paul, 2019) includes MCMC SMC samplers tools Bayesian parameter calibration external models. choose bayesian.tools option, PEcAn framework hand PDA calculations BayesianTools package. Although package includes algorithms designed explore parameter space efficiently traditional MH-MCMC, still need relatively faster model use algorithms. Note BayesianTools R-package constantly development, integration PEcAn may able leverage BayesianTools functionality. emulator : pda.emulator.R main script PDA workflow. model slow, practically possible run hundreds thousands times sequentially explore parameter space draw enough samples converge target distribution bruteforce algorithms. Instead, can run model relatively smaller number times parameter combinations carefully chosen give good coverage parameter space. can interpolate likelihood calculated runs get surface “emulates” true likelihood perform regular MCMC (just like “bruteforce” approach), except instead actually running model every iteration obtain likelihood value, time just get approximation likelihood emulator. lot details emulator approach can found Fer et al. 2018. Multi-site HPDA : pda.emulator.ms.R main script PDA workflow performs multi-site hierarchical Bayesian calibration using emulator approach. multi-site hierarhical calibration, global posteriors fitted simultaneously using additional Gibbs update step, used new prior hyperparameters next iteration MCMC obtain site-level hierarchical posteriors. PDA workflow vignette (see /modules/assim.batch/vignettes/MultiSitePDAVignette.Rmd) one examples . information also see Fer et al. 2021 bioRxiv preprint.","code":""},{"path":"/articles/AssimBatchVignette.html","id":"adding-pda-tags-to-pecan-xml","dir":"Articles","previous_headings":"","what":"Adding PDA tags to pecan.xml","title":"PEcAn.assim.batch Vignette","text":"easiest way use PEcAn’s parameter data assimilation module add <assim.batch> block pecan.xml, load file read.settings, pass resulting settings object pda.bayesian.tools() pda.emulator(). differences settings using different PDA methods (go test cases, point just familiarize general pattern), example <assim.batch> block : details PDA tags: <iter> Specifies number MCMC iterations run. continuing previous MCMC, number additional iterations, added previous total. Defaults 100 missing. <chain> Specifies number MCMC chains run. Defaults 2. Note post-processing functions look least 2 chains diagnostics. <prior> Identifies prior used PDA. Can one either: <param.names> names parameters constrained assimilation, listed individual <param> tags. must standard names given BETY DB (e.g. wood_density), model specific parameter names (e.g. wooddens), .e. check id column trait.dictionary, .e. : can inspect write.config.MODEL.R script standard parameter names mappings model parameter names. <inputs> Observation (constraint) data compared model. principle, can one datasets, specified variety ways. practice, code tested assimilating flux datasets numerous times using NEE/FC LE variables. <file> Denotes set tags single input (constraint data). repeated multiple datasets/variables, e.g. case note differences <variable.id> <variable.name> : <input.id> BETY input ID looking input. <path> File path input. <id> <path> observation data supplied PDA. <source> standardized source input data (e.g., Ameriflux). implemented yet, idea similar met workflow, PEcAn able use standard data sources automatically available. used <id> <path> given. <likelihood> Identifier likelihood use. E.g., Ameriflux NEE/FC LE data use Laplacian likelihood. <hyper.pars> Optional. Hyperparameters likelihood. E.g. Prior parameters precision Gaussian likelihood. Defaults scaled values provided. <ss.positive> using emulator, important let algorithm know likelihood whose sufficient statistics zero bound. <variable.id> BETY variable ID associated dataset. idea specific preprocessing steps (e.g., estimating heteroskedastic error tower NEE) associated particular IDs. automate assigning default <likelihood> variable.id values (allowing <likelihood> omitted pecan.xml). <jump> Settings specifics proposal schema adaptation functionality. used emulator approach, ’s possible set adaptation options using bayesian.tools specific tags well (see <bt.settings>). <ar.target> Target acceptance rate adaptive jump algorithm. Defaults 0.5 missing. <adapt> Number iterations jump variance adaptations. Defaults floor(iter/10) missing. set equal number <iter>, basically turns adaptation functionality, recommended turn-functionality emulator approach. <adj.min> Minimum factor reduce jump variance adapting. Prevents jump variances degenerating 0. Defaults 0.1 missing.","code":"<assim.batch>   <iter>100000<\/iter>   <method>emulator<\/method>                     <--- WHICH PDA APPROACH   <chain>3<\/chain>   <param.names>    <temperate.coniferous>                       <--- YOUR PFT(S)     <param>PARAM1<\/param>                       <--- PARAMETER(S) YOU TARGET IN PDA     <param>PARAM2<\/param>    <\/temperate.coniferous>   <\/param.names>   <jump>    <adapt>250<\/adapt>    <adj.min>0.1<\/adj.min>    <ar.target>0.3<\/ar.target>   <\/jump>   <inputs>     <file>       <input.id> ... <\/input.id>               <--- YOUR CONSTRAINT ID FROM BETY DB        <path>         <path> ... <\/path>                     <--- YOUR CONSTRAINT FILE PATH(S)         <path> ... <\/path>       <\/path>       <likelihood>Laplace<\/likelihood>         <--- LIKELIHOOD FORM FOR THIS CONSTRAINT        <variable.id>298<\/variable.id>           <--- (CONSTRAINT) VARIABLE ID FROM BETY DB       <variable.name>         <variable.name>LE<\/variable.name>      <--- (CONSTRAINT) VARIABLE         <variable.name>UST<\/variable.name>     <--- HELPER VARIABLE SPECIFIC TO FLUX CASE       <\/variable.name>     <\/file>     <file>       <input.id>...<\/input.id>       <path>         <path>...<\/path>       <\/path>       <likelihood>multipGauss<\/likelihood>       <hyper.pars>         <parama>0.001<\/parama>                 <--- HYPERPARAMETERS SPECIFIC TO GAUSSIAN FORM         <paramb>0.001<\/paramb>       <\/hyper.pars>       <ss.positive>TRUE<\/ss.positive>       <variable.id>...<\/variable.id>        <variable.name>         <variable.name>...<\/variable.name>       <\/variable.name>     <\/file>   <\/inputs> <\/assim.batch> + `<posterior.id>` A posterior ID in BETY specifying the posterior from a previous PEcAn analysis (e.g., meta-analysis or previous PDA) to be used as the prior for PDA. Defaults to the most recent relevant posterior in the database if omitted (and no `<path>` specified instead; see below).   + `<path>` As an alternative to using a posterior ID, can specify a file path to either a `prior.distns.Rdata` or `post.distns.Rdata` file generated from an earlier analysis. Conceptually, using a posterior distribution as the prior for PDA is preferred, as this allows the multiple analyses to work together to iteratively constrain parameters. In practice, previous analyses may have over-constrained parameters to ranges that do not actually optimize model outputs, so using a less informative prior for PDA might yield better results.    NOTE: It is recommended to leave the `<prior>` tag empty if you are doing this for the first time. PEcAn workflow will handle it for you. data(trait.dictionary, package = \"PEcAn.utils\")  head(trait.dictionary[,c(\"id\", \"figid\")]) ##                         id                   figid ## 1           plant_min_temp          Plant Min Temp ## 2                      GDD     Growing Degree Days ## 3                    leafC            Leaf C conc. ## 4                 c2n_leaf                Leaf C:N ## 5 leaf_respiration_rate_m2   Leaf Respiration Rate ## 6  dark_respiration_factor Dark Respiration Factor NOTE : `<param.names>` chunk should always be on your xml file regardless of the method you use in the PDA. ... <inputs>  <file>   <input.id>15000000028<\/input.id>      <path>    <path>/data/dbfiles/ICOS_site_1-266/FLX_FI-Var_FLUXNET2015_FULLSET_HH_2016-2018_beta-3.csv<\/path>    <\/path>   <likelihood>Laplace<\/likelihood>   <variable.id>297<\/variable.id>   <variable.name>    <variable.name>NEE<\/variable.name>    <variable.name>UST<\/variable.name>   <\/variable.name>  <\/file>     <file>   <input.id>15000000028<\/input.id>      <path>    <path>/data/dbfiles/ICOS_site_1-266/FLX_FI-Var_FLUXNET2015_FULLSET_HH_2016-2018_beta-3.csv<\/path>    <\/path>   <likelihood>Laplace<\/likelihood>   <variable.id>298<\/variable.id>   <variable.name>    <variable.name>LE<\/variable.name>    <variable.name>UST<\/variable.name>   <\/variable.name>  <\/file> <\/inputs> ... NOTE : `<inputs>` chunk should always be on your xml file regardless of the method you use in the PDA."},{"path":"/articles/AssimBatchVignette.html","id":"method-specific-settings","dir":"Articles","previous_headings":"","what":"Method specific settings","title":"PEcAn.assim.batch Vignette","text":"Now go 4 examples arrange <assim.batch> tags run PDA PEcAn: Using existing PEcAn data pipelines (e.g. Ameriflux) variables emulator-based calibration. Using existing PEcAn data pipelines variables BayesianTools-based (bruteforce) calibration. Using pre-formatted data variables emulator-based calibration. Using pre-formatted data variables BayesianTools-based (bruteforce) calibration.","code":""},{"path":"/articles/AssimBatchVignette.html","id":"pecan-data-pipeline-with-emulator","dir":"Articles","previous_headings":"","what":"1. PEcAn data pipeline with emulator","title":"PEcAn.assim.batch Vignette","text":"Assuming already familiarized Demo 1 Demo 2, ran SIPNET Niwot Ridge (US-NR1), section go pecan.xml tags calibrating SIPNET Ameriflux NEE data emulator approach US-NR1 site. SIPNET PFT site temperate.coniferous, let’s assume top three parameters contributing model NEE output uncertainty (Demo 2) psnTOpt,half_saturation_PAR, Vm_low_temp, decided constrain PDA. Go workflow directory performed uncertainty analysis, open pecan.CONFIGS.xml, insert following tags top xml <pecan> tag (don’t forget remove <--- comments), modify paths according setup, save file pecan.PDA.xml: reference, tags similar workflow SIPNET ICOS-NEE (FI-Var site) combination. Note differences PFT name, input ID path, variable ID name: Now can read pecan.PDA.xml run PDA (take time, go grab drink. first round especially takes time constraint data loaded effective sample size calculated): PDA workflow populated settings list object couple relevant tags. Now settings_PDA_round1 additional tags (note post-PDA settings list also automatically written workflow directory pecan.pdaR1_ENS_ID.xml). tags look like : <prior.id> initial prior went first PDA round. Even though PDA workflow updates <posteriorid> PFT block, another emulator round initial prior used MCMC (otherwise use data twice!). Hence, keep track ID xml. still perfectly fine propose new training points next emulator round posterior previous round, can refine emulator surface, ’s PDA workflow uses <posteriorid> hood. <ensemble.id> emulator round assigned new ensemble ID. can see ID every file recorded associated emulator round, e.g.: history.pdaR1_ENS_ID.Rdata, pecan.pdaR1_ENS_ID.xml, post.distns.pda.YOURPFT_R1_ENS_ID.Rdata etc. Rest tags emulator workflow able find previous rounds’ information understand next round. emulator workflow automatically adds <extension>round<\/extension> forget add tag manually first round, just repeating first round almost certainly intend iterative round using settings previous round. Forgetting add tag happened enough times now add tag automatically. note PDA second type extension <extension>longer<\/extension>. run MCMC chain longer case didn’t converge. issue bruteforce calibration (see ), also possible run MCMC chains longer emulator-based MCMC also didn’t converge: <extension> Specifies extension type additional emulator runs, skipped first emulator run . Otherwise possible extend emulator PDA runs two ways: <extension>longer<\/extension> using emulator, extension run takes MCMC sampling left previous emulator run runs longer MCMC chain. <extension>round<\/extension> extension run proposes new points parameter space addition previous ones, builds new emulator including additional points new MCMC sampling. new points can come inital PDA prior posterior first round emulator run. can determine percentage new knots coming posterior previous run <knot.par> tag. leave empty, 90% new points drawn posterior previous run default. Now can either pass post PDA settings environment pda.emulator() function (yes can put loop) can re-read pecan.pdaR1_ENS_ID.xml time perform iterative emulator round. moving BayesianTools case, pecan.PDA.xml look like case constrain parameters one model PFT one Ameriflux data stream, note ordering <assim.batch><param.names> <pfts>:","code":"<assim.batch>   <method>emulator<\/method>   <n.knot>60<\/n.knot>   <--- 20 x p (= no. of paramaters you target)    <iter>100000<\/iter>   <chain>3<\/chain>   <param.names>    <temperate.coniferous>     <param>psnTOpt<\/param>     <param>half_saturation_PAR<\/param>     <param>Vm_low_temp<\/param>    <\/temperate.coniferous>   <\/param.names>   <jump>    <adapt>250<\/adapt>     <adj.min>0.1<\/adj.min>     <ar.target>0.3<\/ar.target>   <\/jump>   <inputs>    <file>     <input.id>1000011238<\/input.id>   <--- your input ID (of the DB record of where the AMF csv file is)     <path>      <path>/.../AmerifluxLBL_site_0-772/AMF_US-NR1_BASE_HH_12-5.csv<\/path>  <--- your path     <\/path>     <likelihood>Laplace<\/likelihood>     <variable.id>1000000042<\/variable.id>     <variable.name>      <variable.name>FC<\/variable.name>      <variable.name>UST<\/variable.name>     <\/variable.name>    <\/file>   <\/inputs>  <\/assim.batch> <assim.batch>   <method>emulator<\/method>   <n.knot>60<\/n.knot>      <iter>100000<\/iter>   <chain>3<\/chain>   <param.names>    <boreal.coniferous>     <param>psnTOpt<\/param>     <param>half_saturation_PAR<\/param>     <param>Vm_low_temp<\/param>    <\/boreal.coniferous>   <\/param.names>   <jump>    <adapt>250<\/adapt>     <adj.min>0.1<\/adj.min>     <ar.target>0.3<\/ar.target>   <\/jump>   <inputs>    <file>     <input.id>15000000028<\/input.id>       <path>      <path>/.../ICOS_site_1-266/FLX_FI-Var_FLUXNET2015_FULLSET_HH_2016-2018_beta-3.csv<\/path>       <\/path>     <likelihood>Laplace<\/likelihood>     <variable.id>297<\/variable.id>     <variable.name>      <variable.name>NEE<\/variable.name>      <variable.name>UST<\/variable.name>     <\/variable.name>    <\/file>   <\/inputs>  <\/assim.batch> settings <- read.settings(\"pecan.PDA.xml\") settings_PDA_round1 <- pda.emulator(settings) <prior>    <prior.id>     <boreal.coniferous>INITIAL_PDA_PRIOR_ID<\/boreal.coniferous>    <\/prior.id>   <\/prior>   <ensemble.id>    <id>R1_ENS_ID<\/id>   <\/ensemble.id>   <emulator.path>/.../PEcAn_WORKFLOWID/emulator.pdaR1_ENS_ID.Rdata<\/emulator.path>   <ss.path>/.../PEcAn_WORKFLOWID/ss.pdaR1_ENS_ID.Rdata<\/ss.path>   <mcmc.path>/.../PEcAn_WORKFLOWID/mcmc.list.pdaR1_ENS_ID.Rdata<\/mcmc.path>   <resume.path>/.../PEcAn_WORKFLOWID/resume.pdaR1_ENS_ID.Rdata<\/resume.path>   <round_counter>1<\/round_counter>   <extension>round<\/extension> ### settings_PDA_round1 <- read.settings(\"pecan.pdaR1_ENS_ID.xml\") settings_PDA_round2 <- pda.emulator(settings_PDA_round1) ...  <assim.batch>   ...   <param.names>    <PFT1>     <param>PFT1_PDA_param1<\/param>     <param>PFT1_PDA_param2<\/param>    <\/PFT1>    <PFT2>     <param>PFT2_PDA_param1<\/param>     <param>PFT2_PDA_param2<\/param>     <param>PFT2_PDA_param3<\/param>    <\/PFT2>   <\/param.names>   ...   <inputs>    <file>     <input.id>YOURINPUTID<\/input.id>        <path>      <path>/YOURPATH/AmerifluxLBL_site_***/AMF_***_BASE_HH_***.csv<\/path>      <\/path>     <likelihood>Laplace<\/likelihood>     <variable.id>297<\/variable.id>     <variable.name>      <variable.name>NEE<\/variable.name>      <variable.name>UST<\/variable.name>     <\/variable.name>    <\/file>       <file>     <input.id>YOURINPUTID<\/input.id>        <path>      <path>/YOURPATH/AmerifluxLBL_site_***/AMF_***_BASE_HH_***.csv<\/path>      <\/path>     <likelihood>Laplace<\/likelihood>     <variable.id>298<\/variable.id>     <variable.name>      <variable.name>LE<\/variable.name>      <variable.name>UST<\/variable.name>     <\/variable.name>    <\/file>   <\/inputs>   ...  <\/assim.batch>  ...  <pfts>   <pft>    <name>PFT1<\/name>    <outdir>/YOUR/WORKFLOWS/PATH/PEcAn_WORKFLOWID/pft/PFT1<\/outdir>    <posteriorid>PFT1_POSTID<\/posteriorid>   <\/pft>   <pft>    <name>PFT2<\/name>    <outdir>/YOUR/WORKFLOWS/PATH/PEcAn_WORKFLOWID/pft/PFT2<\/outdir>    <posteriorid>PFT2_POSTID<\/posteriorid>   <\/pft>  <\/pfts>  ..."},{"path":"/articles/AssimBatchVignette.html","id":"pecan-data-pipeline-with-bayesiantools","dir":"Articles","previous_headings":"","what":"2. PEcAn data pipeline with BayesianTools","title":"PEcAn.assim.batch Vignette","text":"Using bruteforce PDA approach one MCMC-flavors implemented BayesianTools R-package requires slightly different tags configure setup. pda.bayesian.tools() look sampler specific settings can passed pecan.xml block <bt.settings> tag. Currently, available samplers BayesianTools package : Standard MH-MCMC pre-optimization Adaptive MCMC Delayed rejection Gibbs updating M : Another implementation standard MH-MCMC. : Adaptive Metropolis DR : Delayed Rejection DRAM : Delayed Rejection Adaptive Metropolis DE : Differential Evolution DEzs : Differential Evolution snooker updater DREAM : Differential Evolution Adaptive Metropolis DREAMzs : Differential Evolution Adaptive Metropolis snooker updater Twalk : “traverse” “thoughtful” walk, general purpose sampling algorithm SMC : Sequential Monte Carlo Note possible use samplers package univariate cases. ones can use univariate cases : “Metropolis”, “DE”, “DEzs” “Twalk”. samplers also restartable : “Metropolis”, “DE”, “DEzs”, “DREAM”, “DREAMzs”, “Twalk”. details please see BayesianTools documentation helpful vignette. name chosen sampler passed <sampler> tag within <bt.settings> block. E.g. Metropolis variations: rest <assim.batch> block (except can now omit <jump> tag takes effect case). algorithms can accessed “Metropolis” sampler BayesianTools package specifying sampler’s settings, easier directly pass sampler name explicitly. example DREAMzs (recommended) algorithm: Assuming save tags pecan.PDA.xml case convergence /like run chains longer, can add extension option:","code":"...   <method>bayesian.tools<\/method>   <bt.settings>     <iter>10000<\/iter>     <sampler>Metropolis<\/sampler>     <DRlevels>1<\/DRlevels>                               <-- set 2 for Delayed Rejection     <optimize>FALSE<\/optimize>                           <-- set TRUE for pre-optimization     <adapt>FALSE<\/adapt>                                 <-- set TRUE for Adaptive Metropolis     <adaptationNotBefore>500<\/adaptationNotBefore>       <-- set for Adaptive Metropolis   <\/bt.settings>   ... <assim.batch>    <method>bayesian.tools<\/method>    <bt.settings>      <sampler>DREAMzs<\/sampler>      <iter>10000<\/iter>      <chain>3<\/chain>    <\/bt.settings>   <param.names>    <soil>     <param>som_respiration_rate<\/param>    <\/soil>    <boreal.coniferous>     <param>psnTOpt<\/param>     <param>half_saturation_PAR<\/param>     <param>Vm_low_temp<\/param>    <\/boreal.coniferous>   <\/param.names>   <inputs>    <file>     <input.id>15000000028<\/input.id>        <path>      <path>/data/dbfiles/ICOS_site_1-266/FLX_FI-Var_FLUXNET2015_FULLSET_HH_2016-2018_beta-3.csv<\/path>      <\/path>     <likelihood>Laplace<\/likelihood>     <variable.id>297<\/variable.id>     <variable.name>      <variable.name>NEE<\/variable.name>      <variable.name>UST<\/variable.name>     <\/variable.name>    <\/file>   <\/inputs>  <\/assim.batch> settings <- read.settings(\"pecan.PDA.xml\") settings_postPDA <- pda.bayesian.tools(settings) settings_postPDA$assim.batch$extension <- 'longer' settings_postPDA_longer <- pda.bayesian.tools(settings_postPDA)"},{"path":"/articles/AssimBatchVignette.html","id":"own-data-with-emulator","dir":"Articles","previous_headings":"","what":"3. Own data with emulator","title":"PEcAn.assim.batch Vignette","text":"Sometimes might want use local data (e.g. tower necessarily part flux tower network PEcAn access , chamber measurements etc.) constraining model. Although still recommend using formal PEcAn data registration processing pipelines, sometimes may access DB /may want bypass data processing steps perform quick PDA analysis plan ahead. case, can use external.* arguments pda.emulator() function. can prepare external.* arguments manually, easiest way generate use pda.generate.externals() function can find script name. pda.emulator() function accepts following external.* arguments: external.data list containing constraining variables format expected PDA functions (see also pda.generate.externals() function). length list number data streams (e.g. using NEE LE calibration, two sublists). Hint: may want perform case #1 load history.pda file check format inputs object , external.data passed pda.emulator() simply assined variable, inputs <- external.data. able prepare external.data pda.generate.externals() function need data (n ordered) list sublist corresponds data frame constraining variable two columns, variable name - posix. external.formats list variable names format expected PDA functions (see also pda.generate.externals() function). length list number data streams (e.g. using NEE LE calibration, two sublists). Depending expressions provided object, PDA functions capable performing simple derivations data. Hence, list slightly complex structure simple list names, don’t worry . able prepare external.formats pda.generate.externals() enough pass varn vector standard variable names (doubt, check standard variable names /base/utils/data/standard_vars.csv). external.priors list pecan probability distribution dataframes used PDA priors, one sublist per PFT, e.g.: external.knots list dataframes containing emulator training points. pass want build emulator specific knots want control, otherwise knots generated PDA priors using Latin Hypercube Sampling. sublist nknot x nPFTparam dataframe, e.g. building emulator 250 knots PFT 30 parameters, 250 x 30 dataframe row parameter vector. Therefore columns parameters targeting PDA varying parameter values. E.g. calibrating psnTOpt parameter, look like : prepare external.data external.format, now can omit <input.id><\/input.id> <path><\/path> tags <assim.batch> block (ignored even pass external.data NULL: Save read pecan.PDA.xml accordingly. Next, pass external data formats prepared explicitly pda.emulator() function: Note way provided external constraint data format information PDA functions still using database connection. want use PDA functions database connection, need provide prior list function external object well run remote = TRUE mode. case, also recommended pass ensemble.id identifier PDA run (normally given PDA workflow), can even string: Two notes moving onto next case. , prior.list object, passed prior distribution three parameters target. case rest model parameters kept defaults (whichever way implemented model package), won’t kept medians prior range normally case PDA haven’t passed prior (range) . don’t want happen, pass comprehensive list try use prior (meta analysis posterior) objects generated PEcAn workflows. Finally, haven’t used external.knots argument yet. use need overwrite enforce training points emulator don’t necessarily need populate argument PDA without database connection. leave testing external.knots exercise.","code":"[[1]]                        distn parama  paramb  n frozenSoilEff           beta  1.000    1.00 NA soilRespMoistEffect     unif  0.000    2.00 NA ...  [[2]]                               distn      parama       paramb   n growth_resp_factor             beta       2.630      6.5e+00   0 root_respiration_rate          norm       8.700      9.5e-01  NA ... > external.knots $temperate.deciduous         ...  half_saturation_PAR fine_root_respiration_Q10   psnTOpt  AmaxFrac   ...   [1,]  ...                 15.5                       3.2  24.83626 0.8605507   ...      [2,]  ...                 15.5                       3.2  25.18056 0.8605507   ...   [3,]  ...                 15.5                       3.2  26.10204 0.8605507   ...   [4,]  ...                 15.5                       3.2  25.03353 0.8605507   ...    ...  ...                 ...                        ...       ...       ...   ... <assim.batch>   <method>emulator<\/method>   <n.knot>60<\/n.knot>      <iter>100000<\/iter>   <chain>3<\/chain>   <param.names>    <boreal.coniferous>     <param>psnTOpt<\/param>     <param>half_saturation_PAR<\/param>     <param>Vm_low_temp<\/param>    <\/boreal.coniferous>   <\/param.names>   <jump>    <adapt>250<\/adapt>     <adj.min>0.1<\/adj.min>     <ar.target>0.3<\/ar.target>   <\/jump>   <inputs>    <file>     <likelihood>Laplace<\/likelihood>     <variable.id>297<\/variable.id>     <variable.name>      <variable.name>NEE<\/variable.name>      <variable.name>UST<\/variable.name>     <\/variable.name>    <\/file>   <\/inputs>  <\/assim.batch> settings <- read.settings(\"pecan.PDA.xml\") pda.externals <-  pda.generate.externals(external.data = TRUE, obs = obs, varn = \"NEE\", varid = 297, external.formats = TRUE)  settings_postPDA <- pda.emulator(settings, external.data = pda.externals$external.data, external.formats = pda.externals$external.formats) settings <- read.settings(\"pecan.PDA.xml\") prior.list <-  list(data.frame(distn  = c(\"unif\", \"unif\", \"norm\"),                                 parama = c(5, 4, 0),                                  paramb = c(40, 27, 3),                                   n = rep(NA, 3),                                 row.names = c(\"psnTOpt\", \"half_saturation_PAR\", \"Vm_low_temp\"))) pda.externals <-  pda.generate.externals(external.data    = TRUE, obs = obs, varn = \"NEE\", varid = 297, external.formats = TRUE, external.priors  = TRUE, prior.list = prior.list)  settings_postPDA <- pda.emulator(settings, external.data    = pda.externals$external.data,                                             external.formats = pda.externals$external.formats,                                            external.priors  = pda.externals$external.priors,                                             remote = TRUE, ensemble.id = \"PDA_VIGNETTE\")"},{"path":"/articles/AssimBatchVignette.html","id":"own-data-with-bayesiantools","dir":"Articles","previous_headings":"","what":"4. Own data with BayesianTools","title":"PEcAn.assim.batch Vignette","text":"’s much cases , combination #2 (prepare BayesianTools specific xml tags) #3 (prepare external arguments). Save read pecan.PDA.xml accordingly. Next, pass external data formats prepared explicitly pda.bayesian.tools() function:","code":"<assim.batch>    <method>bayesian.tools<\/method>    <bt.settings>      <sampler>DREAMzs<\/sampler>      <iter>10000<\/iter>      <chain>3<\/chain>    <\/bt.settings>   <param.names>    <boreal.coniferous>     <param>psnTOpt<\/param>     <param>half_saturation_PAR<\/param>     <param>Vm_low_temp<\/param>    <\/boreal.coniferous>   <\/param.names>   <inputs>    <file>     <likelihood>Laplace<\/likelihood>     <variable.id>297<\/variable.id>     <variable.name>      <variable.name>NEE<\/variable.name>      <variable.name>UST<\/variable.name>     <\/variable.name>    <\/file>   <\/inputs>  <\/assim.batch> settings <- read.settings(\"pecan.PDA.xml\") pda.externals <-  pda.generate.externals(external.data    = TRUE, obs = obs, varn = \"NEE\", varid = 297, external.formats = TRUE, external.priors  = TRUE, prior.list = prior.list)  settings_postPDA <- pda.bayesian.tools(settings, external.data    = pda.externals$external.data,                                             external.formats = pda.externals$external.formats,                                            external.priors  = pda.externals$external.priors,                                             remote = TRUE, ensemble.id = \"PDA_VIGNETTE\")"},{"path":"/articles/MultiSitePDAVignette.html","id":"multi-site-hierarchical-pda","dir":"Articles","previous_headings":"","what":"Multi-Site Hierarchical PDA","title":"Multi-site hierarchical calibration vignette","text":"vignette documents steps settings Hierarchical Bayesian Parameter Data Assimilation (HB-PDA) analysis multiple sites, accompanies paper.","code":""},{"path":"/articles/MultiSitePDAVignette.html","id":"initiate-a-new-run-from-the-web-interface","dir":"Articles","previous_headings":"","what":"Initiate a new run from the web interface","title":"Multi-site hierarchical calibration vignette","text":"Follow steps:","code":"host : pecan model : SIPNET (r136) # note I'll change this, because I want to make sure SIPNET code is also version controlled (which exact settings/modules I turned on/off etc.) sitegroup : HB-PDA site : US-Bar (choose any we will modify the xml in the next step)  CLICK NEXT  pft : soil.ALL, temperate.deciduous.ALL start date : leave as it is end date : leave as it is pool_initial_condition : skip Sipnet.climna: Use AmerifluxLBL  NOW CHECK THE EDIT XML TICK BOX AND CLICK NEXT (Enter pecan for user name in the following page)"},{"path":"/articles/MultiSitePDAVignette.html","id":"start-with-multi-settings","dir":"Articles","previous_headings":"","what":"Start with multi-settings","title":"Multi-site hierarchical calibration vignette","text":"Now seeing pecan.xml associated choices made . Remove <site>, <start.date> <end.date> tags <run> section add <sitegroup> tag pecan.xml <run> section group sites interested . vignette, use HB-PDA site group BETYdb consists 12 temperate decidious broadleaf forest (DBF) sites ofthe Ameriflux network. Overall, pecan.xml sections look like : Now hit save button open RStudio. Go working directory run just created. E.g. setwd(\"/fs/data2/output/PEcAn_1000010272\"). Open workflow.R script start going lines. Stop :","code":"<sitegroup>     <id>1000000022<\/id>   <\/sitegroup>   <run>     <inputs>       <met>         <source>AmerifluxLBL<\/source>         <output>SIPNET<\/output>       <username>pecan<\/username>       <\/met>     <\/inputs>   <\/run> # Write pecan.CHECKED.xml PEcAn.settings::write.settings(settings, outputfile = \"pecan.CHECKED.xml\")"},{"path":"/articles/MultiSitePDAVignette.html","id":"fill-in-site-specific-input-information","dir":"Articles","previous_headings":"","what":"Fill in site-specific input information","title":"Multi-site hierarchical calibration vignette","text":"open pecan.CHECKED.xml, ’ll see <run> tag expanded tags repeated site. Now specify <inputs>, <start.date> <end.date> information. E.g.:","code":"<run>   <settings.1>    <site>     <id>796<\/id>     <met.start>2005/01/01<\/met.start>     <met.end>2011/12/31<\/met.end>     <name>Bartlett Experimental Forest (US-Bar)<\/name>     <lat>44.06464<\/lat>     <lon>-71.288077<\/lon>    <\/site>    <start.date>2005/01/01<\/start.date>    <end.date>2011/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-796/AMF_US-Bar_BASE_HH_4-1.2005-01-01.2011-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-796/IC_site_0-796.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.1>   <settings.2>    <site>     <id>767<\/id>     <met.start>2001/01/01<\/met.start>     <met.end>2014/12/31<\/met.end>     <name>Morgan Monroe State Forest (US-MMS)<\/name>     <lat>39.3231<\/lat>     <lon>-86.4131<\/lon>    <\/site>    <start.date>2001/01/01<\/start.date>    <end.date>2014/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-767/AMF_US-MMS_BASE_HR_8-1.2001-01-01.2014-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-767/IC_site_0-767.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.2>   <settings.3>    <site>     <id>768<\/id>     <met.start>2005/01/01<\/met.start>     <met.end>2015/12/31<\/met.end>     <name>Missouri Ozark Site/BREA (US-MOz)<\/name>     <lat>38.7441<\/lat>     <lon>-92.2<\/lon>    <\/site>    <start.date>2005/01/01<\/start.date>    <end.date>2015/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-768/AMF_US-MOz_BASE_HH_7-1.2005-01-01.2015-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-768/IC_site_0-768.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.3>   <settings.4>    <site>     <id>776<\/id>     <met.start>2007/01/01<\/met.start>     <met.end>2014/12/31<\/met.end>     <name>Univiversity of Michigan Biological Station (US-UMB)<\/name>     <lat>45.5598<\/lat>     <lon>-84.7138<\/lon>    <\/site>    <start.date>2007/01/01<\/start.date>    <end.date>2014/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-776/AMF_US-UMB_BASE_HH_10-1.2007-01-01.2014-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-776/IC_site_0-776.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.4>   <settings.5>    <site>     <id>676<\/id>     <met.start>1999/01/01<\/met.start>     <met.end>2006/12/31<\/met.end>     <name>Willow Creek (US-WCr)<\/name>     <lat>45.805925<\/lat>     <lon>-90.07961<\/lon>    <\/site>    <start.date>1999/01/01<\/start.date>    <end.date>2006/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-676/AMF_US-WCr_BASE_HH_11-1.1999-01-01.2006-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-676/IC_site_0-676.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.5>   <settings.6>    <site>     <id>1000000109<\/id>     <met.start>2013/01/01<\/met.start>     <met.end>2015/12/31<\/met.end>     <name>Ontario - Turkey Point Mature Deciduous (CA-TPD)<\/name>     <lat>42.6353<\/lat>     <lon>-80.5577<\/lon>    <\/site>    <start.date>2013/01/01<\/start.date>    <end.date>2015/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_1-109/AMF_CA-TPD_BASE_HH_1-1.2013-01-01.2015-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_1-109/IC_site_1-109.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.6>   <settings.7>    <site>     <id>755<\/id>     <met.start>2002/01/01<\/met.start>     <met.end>2008/12/31<\/met.end>     <name>Duke Forest-hardwoods (US-Dk2)<\/name>     <lat>35.9736<\/lat>     <lon>-79.1004<\/lon>    <\/site>    <start.date>2002/01/01<\/start.date>    <end.date>2008/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-755/AMF_US-Dk2_BASE_HH_4-4.2002-01-01.2008-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-755/IC_site_0-755.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.7>   <settings.8>    <site>     <id>1000000145<\/id>     <met.start>2010/01/01<\/met.start>     <met.end>2010/12/31<\/met.end>     <name>Chestnut Ridge (US-ChR)<\/name>     <lat>35.9311<\/lat>     <lon>-84.3324<\/lon>    <\/site>    <start.date>2010/01/01<\/start.date>    <end.date>2010/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_1-145//AMF_US-ChR_BASE_HH_2-1.2010-01-01.2010-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_1-145/IC_site_1-145.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.8>   <settings.9>    <site>     <id>1000000066<\/id>     <met.start>2005/01/01<\/met.start>     <met.end>2014/12/31<\/met.end>     <name>Silas Little- New Jersey (US-Slt)<\/name>     <lat>39.9138<\/lat>     <lon>-74.596<\/lon>    <\/site>    <start.date>2005/01/01<\/start.date>    <end.date>2014/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_1-66/AMF_US-Slt_BASE_HH_5-1.2005-01-01.2014-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_1-66/IC_site_1-66.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.9>   <settings.10>    <site>     <id>1000000061<\/id>     <met.start>2004/01/01<\/met.start>     <met.end>2013/12/31<\/met.end>     <name>Oak Openings (US-Oho)<\/name>     <lat>41.5545<\/lat>     <lon>-83.8438<\/lon>    <\/site>    <start.date>2004/01/01<\/start.date>    <end.date>2013/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_1-61/AMF_US-Oho_BASE_HH_4-1.2004-01-01.2013-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_1-61/IC_site_1-61.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.10>   <settings.11>    <site>     <id>740<\/id>     <met.start>1997/01/01<\/met.start>     <met.end>2010/12/31<\/met.end>     <name>BOREAS SSA Old Aspen (CA-Oas)<\/name>     <lat>53.6289<\/lat>     <lon>-106.198<\/lon>    <\/site>    <start.date>1997/01/01<\/start.date>    <end.date>2010/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-740/AMF_CA-Oas_BASE_HH_1-1.1997-01-01.2010-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-740/IC_site_0-740.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.11>   <settings.12>    <site>     <id>758<\/id>     <met.start>2010/01/01<\/met.start>     <met.end>2015/12/31<\/met.end>     <name>Harvard Forest EMS Tower/HFR1 (US-Ha1)<\/name>     <lat>42.5378<\/lat>     <lon>-72.1715<\/lon>    <\/site>    <start.date>2010/01/01<\/start.date>    <end.date>2015/12/31<\/end.date>    <inputs>     <met>      <path>       <path1>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_SIPNET_site_0-758/AMF_US-Ha1_BASE_HR_10-1.2010-01-01.2015-12-31.clim<\/path1>      <\/path>     <\/met>     <poolinitcond>      <path>/fs/data3/istfer/HPDA/data/param.files/site_0-758/IC_site_0-758.nc<\/path>     <\/poolinitcond>    <\/inputs>   <\/settings.12>  <\/run>"},{"path":"/articles/MultiSitePDAVignette.html","id":"modify-ensemble-analysis-tags","dir":"Articles","previous_headings":"","what":"Modify ensemble analysis tags","title":"Multi-site hierarchical calibration vignette","text":"Now let’s specify ensemble <size> ensemble <variable> within <ensemble> tag. paper give ensemble runs 250 members can try smaller ensembles. Overall, pecan.xml <ensemble> sections look like : Now save file. Re-read updated pecan.CHECKED.xml, make sure re-assign random effects logical, otherwise meta.analysis throw error:","code":"<ensemble>     <size>250<\/size>     <variable>NEE<\/variable>     <samplingspace>      <parameters>       <method>uniform<\/method>      <\/parameters>      <met>      <method>sampling<\/method>      <\/met>    <\/samplingspace>   <\/ensemble> settings <- read.settings(\"pecan.CHECKED.xml\") settings$meta.analysis$random.effects <- as.logical(settings$meta.analysis$random.effects)"},{"path":"/articles/MultiSitePDAVignette.html","id":"global-sa","dir":"Articles","previous_headings":"","what":"Global SA","title":"Multi-site hierarchical calibration vignette","text":"continue rest workflow <assim.batch> module: running module, conduct analyses ensemble run outputs identify parameters like target PDA. add PDA tags, see next section.","code":"globalSA_explore <- function(workflow_dir, var, ens.settings){   load(paste0(workflow_dir, \"/ensemble.samples.\", ens.settings$ensemble$ensemble.id,\".Rdata\"))   samps <- do.call(\"cbind\", ens.samples)      load(paste0(workflow_dir, \"/ensemble.output.\", ens.settings$ensemble$ensemble.id,               \".\",var,\".\", ens.settings$ensemble$start.year, \".\",               ens.settings$ensemble$end.year,\".Rdata\"))      allm <- cbind(unlist(ensemble.output), samps)   colnames(allm) <- c(var, colnames(samps))   form <- as.formula(paste(var, \" ~ .\"))   var.fit <- lm(form, allm)      alls <-summary(var.fit)$coefficients[,1]     alls[summary(var.fit)$coefficients[,4] >= 0.05] <- NA  # don't consider non-significant fits      alls <- alls[names(alls) != \"(Intercept)\"]   preds <- names(alls)       n <- length(preds)   id <- unlist(lapply(1, function(i)combn(1:n,i,simplify=FALSE)),recursive=FALSE)      Formulas <- sapply(id, function(i)     paste(var,\"~\",paste(preds[i],collapse=\":\"))   )      fits <- lapply(Formulas,function(i)     lm(as.formula(i), data=allm))      for(tr in 1:n){          f  <- summary(fits[[tr]])$fstatistic     pfval <- pf(f[1],f[2],f[3],lower.tail=F)     if(pfval < 0.001){       alls[names(alls) == preds[tr]] <- summary(fits[[tr]])$adj.r.squared     }else{       alls[names(alls) == preds[tr]] <- NA     }        }      alls <- data.frame(par=names(alls), rexp = alls, site =i)   alls <- alls[order( alls$rexp),]      return(alls) }   workflow_dir <- \"/fs/data2/output//PEcAn_1000010172\"  multi.settings <- read.settings(\"pecan.CONFIGS.xml\")  Qle_list <- NEE_list <- list()  for(i in seq_along(multi.settings)){   Qle_list[[i]] <- globalSA_explore(workflow_dir, \"Qle\", multi.settings[[i]])   NEE_list[[i]] <- globalSA_explore(workflow_dir, \"NEE\", multi.settings[[i]]) }   Qle_df  <- do.call(\"rbind\", Qle_list) Qle_df$var <- \"Qle\" NEE_df  <- do.call(\"rbind\", NEE_list) NEE_df$var <- \"NEE\" allm <- rbind(Qle_df, NEE_df) allm <- allm[!is.na(allm$rexp),]  p1 <- ggplot(allm, aes(par, rexp, fill=var)) + coord_flip() + ylab(\"R2\") + xlab(\"SIPNET parameters\") p1 + geom_boxplot() + theme_bw() # Run parameter data assimilation if ('assim.batch' %in% names(settings)) {   if (PEcAn.utils::status.check(\"PDA\") == 0) {     PEcAn.utils::status.start(\"PDA\")     settings <- PEcAn.assim.batch::runModule.assim.batch(settings)     PEcAn.utils::status.end()   } }"},{"path":"/articles/MultiSitePDAVignette.html","id":"settings-for-hb-pda","dir":"Articles","previous_headings":"","what":"Settings for HB-PDA","title":"Multi-site hierarchical calibration vignette","text":"Similar PDA settings, contain HB-PDA settings <assim.batch> section. Likewise standard PDA, chosen parameters want target calibration, open pecan.CONFIGS.xml file, insert <assim.batch> tag. Different PDA settings, time main function emulator.ms. function can run three modes, selected <mode> tag : individual, joint hierarchical. left empty, function go three modes. note , joint hierarhical calibration, need site-level runs. start individual mode, .e. site-level calibration. Now open pecan.CONFIGS.xml file. First, add <assim.batch> tag multisettings bottom xml among others: Now can insert multi-site settings <assim.batch> section accordingly (note method, mode, param.names etc. go setting.*): Now save pecan.HBPDA.xml read . Following section briefly explains happens :","code":"<multisettings>   <multisettings>assim.batch<\/multisettings>   <multisettings>ensemble<\/multisettings>   <multisettings>sensitivity.analysis<\/multisettings>   <multisettings>run<\/multisettings>  <\/multisettings> <assim.batch>   <settings.1>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013322<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_0-796/AMF_US-Bar_BASE_HH_4-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.1>   <settings.2>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013317<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_0-767/AMF_US-MMS_BASE_HR_8-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.2>   <settings.3>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013316<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_0-768/AMF_US-MOz_BASE_HH_7-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.3>   <settings.4>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013832<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_0-776/AMF_US-UMB_BASE_HH_10-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.4>   <settings.5>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000012965<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_0-676/AMF_US-WCr_BASE_HH_11-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.5>   <settings.6>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013836<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_1-109/AMF_CA-TPD_BASE_HH_1-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.6>   <settings.7>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013546<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_1-145/AMF_US-ChR_BASE_HH_2-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.7>   <settings.8>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013572<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_1-66/AMF_US-Slt_BASE_HH_5-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.8>     <settings.9>     <method>emulator.ms<\/method>     <mode>individual<\/mode>     <n.knot>70<\/n.knot>     <iter>100000<\/iter>     <chain>3<\/chain>     <param.names>      <soil.IF>       <param>som_respiration_rate<\/param>       <param>soil_respiration_Q10<\/param>      <\/soil.IF>      <temperate.deciduous.IF>       <param>psnTOpt<\/param>       <param>half_saturation_PAR<\/param>       <param>dVPDSlope<\/param>       <param>leafGrowth<\/param>       <param>AmaxFrac<\/param>      <\/temperate.deciduous.IF>     <\/param.names>     <inputs>       <file>         <input.id>1000013482<\/input.id>         <path>          <path>/fs/data1/pecan.data/dbfiles/AmerifluxLBL_site_1-61/AMF_US-Oho_BASE_HH_4-1.csv<\/path>         <\/path>         <likelihood>Laplace<\/likelihood>         <variable.id>1000000042<\/variable.id>         <variable.name>           <variable.name>FC<\/variable.name>           <variable.name>UST<\/variable.name>        <\/variable.name>      <\/file>     <\/inputs>   <\/settings.9>   <\/assim.batch> multi.settings <- read.settings(\"pecan.HBPDA.xml\") pda.emulator.ms(multi.settings)"},{"path":"/articles/MultiSitePDAVignette.html","id":"the-workflow-for-hb-pda","dir":"Articles","previous_headings":"","what":"The workflow for HB-PDA","title":"Multi-site hierarchical calibration vignette","text":"HB-PDA workflow multiple sites starts fitting models locally. done looping PEcAn multi-settings list using pda.emulator function. step, site-level runs, GP fitting MCMC done. Components runs saved used global hierarhical fitting. global calibration, estimate posterior using site-level GPs iteration. Proposed values plugged-GPs, accepted/rejected according estimated likelihoods. Hierarhical calibration, uses similar function mcmc.GP modified hierarchihcal fitting, called hier.mcmc. Within function, site-level (hierarchically modeled) global parameters fitted.","code":""},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mike Dietze. Author. Istem Fer. Author, maintainer. Ryan Kelly. Author. University Illinois, NCSA. Copyright holder.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Dietze M, Fer , Kelly R (2025). PEcAn.assim.batch: PEcAn Functions Used Ecological Forecasts Reanalysis. R package version 1.9.0.9000, https://pecanproject.github.io.","code":"@Manual{,   title = {PEcAn.assim.batch: PEcAn Functions Used for Ecological Forecasts and Reanalysis},   author = {Mike Dietze and Istem Fer and Ryan Kelly},   year = {2025},   note = {R package version 1.9.0.9000},   url = {https://pecanproject.github.io}, }"},{"path":"/index.html","id":"pecanassimbatch","dir":"","previous_headings":"","what":"PEcAn Functions Used for Ecological Forecasts and Reanalysis","title":"PEcAn Functions Used for Ecological Forecasts and Reanalysis","text":"PEcAn Functions Used Ecological Forecasts Reanalysis","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"PEcAn Functions Used for Ecological Forecasts and Reanalysis","text":"can install development version PEcAn.assim.batch r-universe like : can install directly GitHub remotes package like :","code":"# Enable repository from pecanproject options(repos = c(   pecanproject = 'https://pecanproject.r-universe.dev',   CRAN = 'https://cloud.r-project.org')) # Download and install PEcAn.assim.batch in R install.packages('PEcAn.assim.batch') library(remotes) install_github('pecanproject/pecan',  subdir = \"modules/assim.batch\")"},{"path":"/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"PEcAn Functions Used for Ecological Forecasts and Reanalysis","text":"basic example shows solve common problem:","code":"library(PEcAn.assim.batch) ## basic example code"},{"path":"/reference/assim.batch.html","id":null,"dir":"Reference","previous_headings":"","what":"Run Batch PDA — assim.batch","title":"Run Batch PDA — assim.batch","text":"Run Batch PDA","code":""},{"path":"/reference/assim.batch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run Batch PDA — assim.batch","text":"","code":"assim.batch(settings)"},{"path":"/reference/assim.batch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run Batch PDA — assim.batch","text":"settings PEcAn settings list","code":""},{"path":"/reference/assim.batch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run Batch PDA — assim.batch","text":"Updated settings list","code":""},{"path":"/reference/assim.batch.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Run Batch PDA — assim.batch","text":"Ryan Kelly","code":""},{"path":"/reference/autoburnin.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatically calculate and apply burnin value — autoburnin","title":"Automatically calculate and apply burnin value — autoburnin","text":"Automatically calculate apply burnin value","code":""},{"path":"/reference/autoburnin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatically calculate and apply burnin value — autoburnin","text":"","code":"autoburnin(jags_out, return.burnin = FALSE, ...)"},{"path":"/reference/autoburnin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Automatically calculate and apply burnin value — autoburnin","text":"jags_out JAGS output return.burnin Logical. TRUE, return burnin value addition samples (list). Default = FALSE. ... Additional arguments getBurnin, gelman_diag_mw, gelman.diag.","code":""},{"path":"/reference/autoburnin.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Automatically calculate and apply burnin value — autoburnin","text":"Michael Dietze, Alexey Shiklomanov","code":""},{"path":"/reference/autoburnin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Automatically calculate and apply burnin value — autoburnin","text":"","code":"z1 <- coda::mcmc(c(rnorm(2500, 5), rnorm(2500, 0)))      z2 <- coda::mcmc(c(rnorm(2500, -5), rnorm(2500, 0)))      z <- coda::mcmc.list(z1, z2)      z_burned <- autoburnin(z)"},{"path":"/reference/bounded.html","id":null,"dir":"Reference","previous_headings":"","what":"bounded — bounded","title":"bounded — bounded","text":"bounded","code":""},{"path":"/reference/bounded.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"bounded — bounded","text":"","code":"bounded(xnew, rng)"},{"path":"/reference/bounded.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"bounded — bounded","text":"xnew new x coordinate rng range","code":""},{"path":"/reference/calculate.prior.html","id":null,"dir":"Reference","previous_headings":"","what":"calculate.prior — calculate.prior","title":"calculate.prior — calculate.prior","text":"calculate.prior","code":""},{"path":"/reference/calculate.prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"calculate.prior — calculate.prior","text":"","code":"calculate.prior(samples, priors)"},{"path":"/reference/calculate.prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"calculate.prior — calculate.prior","text":"samples Matrix MCMC samples priors prior list","code":""},{"path":"/reference/correlationPlot.html","id":null,"dir":"Reference","previous_headings":"","what":"Flexible function to create correlation density plots — correlationPlot","title":"Flexible function to create correlation density plots — correlationPlot","text":"numeric matrix data.frame","code":""},{"path":"/reference/correlationPlot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flexible function to create correlation density plots — correlationPlot","text":"","code":"correlationPlot(   mat,   density = \"smooth\",   thin = \"auto\",   method = \"pearson\",   whichParameters = NULL )"},{"path":"/reference/correlationPlot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flexible function to create correlation density plots — correlationPlot","text":"mat matrix data frame variables density type plot thin thinning matrix make things faster. Default thin 5000 method method calculating correlations whichParameters params ","code":""},{"path":"/reference/correlationPlot.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Flexible function to create correlation density plots — correlationPlot","text":"code correlation density plot originates Hartig, F.; Dislich, C.; Wiegand, T. & Huth, . (2014) Technical Note: Approximate Bayesian parameterization process-based tropical forest model. Biogeosciences, 11, 1261-1272.","code":""},{"path":"/reference/correlationPlot.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Flexible function to create correlation density plots — correlationPlot","text":"Florian Hartig","code":""},{"path":"/reference/ddist.html","id":null,"dir":"Reference","previous_headings":"","what":"ddist — ddist","title":"ddist — ddist","text":"ddist","code":""},{"path":"/reference/ddist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"ddist — ddist","text":"","code":"ddist(x, prior)"},{"path":"/reference/ddist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"ddist — ddist","text":"x vector values (e.g. observations) evaluated specified probability density function prior data.frame specifying prior probability distribution terms distribution name (distn) first second parameters (parama, paramb)","code":""},{"path":"/reference/gelman_diag_gelmanPlot.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Gelman Diagnostic using coda::gelman.plot — gelman_diag_gelmanPlot","title":"Calculate Gelman Diagnostic using coda::gelman.plot — gelman_diag_gelmanPlot","text":"Calculates Gelman diagnostic cumulatively. much conservative approach moving-window method.","code":""},{"path":"/reference/gelman_diag_gelmanPlot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Gelman Diagnostic using coda::gelman.plot — gelman_diag_gelmanPlot","text":"","code":"gelman_diag_gelmanPlot(x, ...)"},{"path":"/reference/gelman_diag_gelmanPlot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Gelman Diagnostic using coda::gelman.plot — gelman_diag_gelmanPlot","text":"x MCMC samples ... additional arguments","code":""},{"path":"/reference/gelman_diag_gelmanPlot.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Calculate Gelman Diagnostic using coda::gelman.plot — gelman_diag_gelmanPlot","text":"Alexey Shiklomanov","code":""},{"path":"/reference/gelman_diag_mw.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Gelman diagnostic on moving window — gelman_diag_mw","title":"Calculate Gelman diagnostic on moving window — gelman_diag_mw","text":"Calculate Gelman diagnostic moving window","code":""},{"path":"/reference/gelman_diag_mw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Gelman diagnostic on moving window — gelman_diag_mw","text":"","code":"gelman_diag_mw(   x,   width_fraction = 0.1,   width = ceiling(coda::niter(x) * width_fraction),   njump = 50,   include.mpsrf = TRUE,   ... )"},{"path":"/reference/gelman_diag_mw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Gelman diagnostic on moving window — gelman_diag_mw","text":"x MCMC samples, class mcmc mcmc.list width_fraction Fractional width moving window. Default=0.1. width Width moving window. Default niter(x)*width_fraction njump Number windows calculate include.mpsrf Whether calculate multivariate PSRF include output (default = FALSE). ... additional arguments","code":""},{"path":"/reference/gelman_diag_mw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Gelman diagnostic on moving window — gelman_diag_mw","text":"Gelman Diagnostic 3D array. First dim – mean (1) 95% confidence (2). Second dim – iteration","code":""},{"path":"/reference/gelman_diag_mw.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Calculate Gelman diagnostic on moving window — gelman_diag_mw","text":"Alexey Shiklomanov","code":""},{"path":"/reference/generate_hierpost.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function that generates the hierarchical posteriors — generate_hierpost","title":"Helper function that generates the hierarchical posteriors — generate_hierpost","text":"Helper function generates hierarchical posteriors","code":""},{"path":"/reference/generate_hierpost.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function that generates the hierarchical posteriors — generate_hierpost","text":"","code":"generate_hierpost(mcmc.out, prior.fn.all, prior.ind.all)"},{"path":"/reference/generate_hierpost.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function that generates the hierarchical posteriors — generate_hierpost","text":"mcmc.hierarchical MCMC outputs prior.fn.list prior functions prior.ind.indices targeted params","code":""},{"path":"/reference/generate_hierpost.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function that generates the hierarchical posteriors — generate_hierpost","text":"hierarchical MCMC outputs original parameter space","code":""},{"path":"/reference/generate_hierpost.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Helper function that generates the hierarchical posteriors — generate_hierpost","text":"Istem Fer","code":""},{"path":"/reference/getBurnin.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate burnin value — getBurnin","title":"Calculate burnin value — getBurnin","text":"Automatically detect burnin based one several methods.","code":""},{"path":"/reference/getBurnin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate burnin value — getBurnin","text":"","code":"getBurnin(   jags_out,   threshold = 1.1,   use.confidence = TRUE,   method = \"moving.window\",   plotfile = \"/dev/null\",   ... )"},{"path":"/reference/getBurnin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate burnin value — getBurnin","text":"jags_out List MCMC sample matrices mcmc.list object threshold Maximum value Gelman diagnostic use.confidence Logical. TRUE (default), use 95% confidence interval Gelman Diagnostic. FALSE, use point estimate. method Character string indicating method. Options \"moving.window\" (default) \"gelman.plot\". plotfile path ... parameters methods","code":""},{"path":"/reference/getBurnin.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate burnin value — getBurnin","text":"See \"gelman_diag_mw\" \"gelman_diag_gelmanPlot\"","code":""},{"path":"/reference/getBurnin.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Calculate burnin value — getBurnin","text":"Alexey Shiklomanov, Michael Dietze","code":""},{"path":"/reference/getBurnin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate burnin value — getBurnin","text":"","code":"z1 <- coda::mcmc(c(rnorm(2500, 5), rnorm(2500, 0)))      z2 <- coda::mcmc(c(rnorm(2500, -5), rnorm(2500, 0)))      z <- coda::mcmc.list(z1, z2)      burnin <- getBurnin(z, threshold = 1.05)"},{"path":"/reference/get_ss.html","id":null,"dir":"Reference","previous_headings":"","what":"get_ss — get_ss","title":"get_ss — get_ss","text":"get_ss","code":""},{"path":"/reference/get_ss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_ss — get_ss","text":"","code":"get_ss(gp, xnew, pos.check)"},{"path":"/reference/get_ss.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_ss — get_ss","text":"gp Gaussian Process xnew new x coordinate pos.check check value needs positive (TRUE, returns -Inf GP negative)","code":""},{"path":"/reference/get_y.html","id":null,"dir":"Reference","previous_headings":"","what":"get_y — get_y","title":"get_y — get_y","text":"get_y","code":""},{"path":"/reference/get_y.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_y — get_y","text":"","code":"get_y(SSnew, xnew, llik.fn, priors, llik.par)"},{"path":"/reference/get_y.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_y — get_y","text":"SSnew new summary statistic xnew new x coordinate llik.fn list contains likelihood functions priors prior list llik.par parameters passed llik functions","code":""},{"path":"/reference/gpeval.html","id":null,"dir":"Reference","previous_headings":"","what":"gpeval — gpeval","title":"gpeval — gpeval","text":"Calculates probability set parameter values, given xnew","code":""},{"path":"/reference/gpeval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"gpeval — gpeval","text":"","code":"gpeval(xnew, k, mu, tau, psi, x, rng, splinefuns)"},{"path":"/reference/gpeval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"gpeval — gpeval","text":"xnew new x coordinate k Specific absorption coefficient (400 - 2500nm) mu mean parameter distribution; NOTE equal mean tau spatial var psi spatial corr x Name variable plot X axis rng range splinefuns spline functions","code":""},{"path":"/reference/gpeval.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"gpeval — gpeval","text":"Michael Dietze","code":""},{"path":"/reference/hier.mcmc.html","id":null,"dir":"Reference","previous_headings":"","what":"Hierarchical MCMC using emulator — hier.mcmc","title":"Hierarchical MCMC using emulator — hier.mcmc","text":"Hierarchical MCMC","code":""},{"path":"/reference/hier.mcmc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hierarchical MCMC using emulator — hier.mcmc","text":"","code":"hier.mcmc(   settings,   gp.stack,   nstack = NULL,   nmcmc,   rng_orig,   jmp0,   mu_site_init,   nparam,   nsites,   llik.fn,   prior.fn.all,   prior.ind.all )"},{"path":"/reference/hier.mcmc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Hierarchical MCMC using emulator — hier.mcmc","text":"settings pecan settings list gp.stack list GPs nstack list number observations, currently used nmcmc number MCMC iterations rng_orig range knots jmp0 initial jump vars mu_site_init initial parameter values per site nparam number parameters nsites number sites llik.fn list likelihood functions prior.fn.list prior functions prior.ind.indices targeted parameters","code":""},{"path":"/reference/hier.mcmc.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Hierarchical MCMC using emulator — hier.mcmc","text":"Istem Fer","code":""},{"path":"/reference/is.accepted.html","id":null,"dir":"Reference","previous_headings":"","what":"is.accepted — is.accepted","title":"is.accepted — is.accepted","text":".accepted","code":""},{"path":"/reference/is.accepted.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"is.accepted — is.accepted","text":"","code":"is.accepted(ycurr, ynew, format = \"lin\")"},{"path":"/reference/is.accepted.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"is.accepted — is.accepted","text":"ycurr current value y axis ynew new y coordinate format lin = lnlike fcn, log = log(lnlike)","code":""},{"path":"/reference/load.pda.data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Ameriflux L2 Data From NetCDF — load.pda.data","title":"Load Ameriflux L2 Data From NetCDF — load.pda.data","text":"Load Ameriflux L2 Data NetCDF Load Dataset Paramater Data Assimilation","code":""},{"path":"/reference/load.pda.data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Ameriflux L2 Data From NetCDF — load.pda.data","text":"","code":"load.L2Ameriflux.cf(file.in)  load.pda.data(settings, bety, external.formats = NULL)"},{"path":"/reference/load.pda.data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Ameriflux L2 Data From NetCDF — load.pda.data","text":"file.= netcdf file L2 data settings = PEcAn settings list bety database connection object external.formats formats list","code":""},{"path":"/reference/load.pda.data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Ameriflux L2 Data From NetCDF — load.pda.data","text":"data frame variables netcdf list containg loaded input data, plus metadata","code":""},{"path":"/reference/load.pda.data.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Load Ameriflux L2 Data From NetCDF — load.pda.data","text":"Ryan Kelly Ryan Kelly, Istem Fer","code":""},{"path":"/reference/load_pda_history.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function that loads history from previous PDA run, but returns only requested objects — load_pda_history","title":"Helper function that loads history from previous PDA run, but returns only requested objects — load_pda_history","text":"Helper function loads history previous PDA run, returns requested objects","code":""},{"path":"/reference/load_pda_history.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function that loads history from previous PDA run, but returns only requested objects — load_pda_history","text":"","code":"load_pda_history(workdir, ensemble.id, objects)"},{"path":"/reference/load_pda_history.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function that loads history from previous PDA run, but returns only requested objects — load_pda_history","text":"workdir path working dir e.g. '/fs/data2/output/PEcAn_***' ensemble.id ensemble id previous PDA run, objects retrieved objects object names common multi PDA runs, e.g. llik.fn, prior.list etc.","code":""},{"path":"/reference/load_pda_history.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function that loads history from previous PDA run, but returns only requested objects — load_pda_history","text":"list objects used joint hierarchical PDA","code":""},{"path":"/reference/load_pda_history.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Helper function that loads history from previous PDA run, but returns only requested objects — load_pda_history","text":"Istem Fer","code":""},{"path":"/reference/makeMCMCList.html","id":null,"dir":"Reference","previous_headings":"","what":"Make MCMC list from samples list — makeMCMCList","title":"Make MCMC list from samples list — makeMCMCList","text":"Make MCMC list samples list","code":""},{"path":"/reference/makeMCMCList.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make MCMC list from samples list — makeMCMCList","text":"","code":"makeMCMCList(samps)"},{"path":"/reference/makeMCMCList.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make MCMC list from samples list — makeMCMCList","text":"samps samples list (output invert.custom)","code":""},{"path":"/reference/mcmc.GP.html","id":null,"dir":"Reference","previous_headings":"","what":"mcmc.GP — mcmc.GP","title":"mcmc.GP — mcmc.GP","text":"Function sample GP model assumed -lnLikelihood surface flat priors bounded region","code":""},{"path":"/reference/mcmc.GP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"mcmc.GP — mcmc.GP","text":"","code":"mcmc.GP(   gp,   x0,   nmcmc,   rng,   format = \"lin\",   mix = \"joint\",   splinefuns = NULL,   jmp0 = 0.35 * (rng[, 2] - rng[, 1]),   ar.target = 0.5,   priors = NA,   settings,   run.block = TRUE,   n.of.obs,   llik.fn,   hyper.pars,   resume.list = NULL )"},{"path":"/reference/mcmc.GP.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"mcmc.GP — mcmc.GP","text":"gp Gaussian Process x0 initial values nmcmc number iterations rng range knots format lin = lnlike fcn, log = log(lnlike) mix = jump dim. independently, joint = jump splinefuns spline functions, used jmp0 initial jump variances ar.target acceptance rate target priors prior list settings PEcAn settings list run.block new run making previous chain longer n..obs number observations llik.fn list contains likelihood functions hyper.pars hyper parameters resume.list list needed info running chain longer","code":""},{"path":"/reference/mcmc.GP.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"mcmc.GP — mcmc.GP","text":"Michael Dietze","code":""},{"path":"/reference/minimize.GP.html","id":null,"dir":"Reference","previous_headings":"","what":"minimize.GP — minimize.GP","title":"minimize.GP — minimize.GP","text":"minimize.GP","code":""},{"path":"/reference/minimize.GP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"minimize.GP — minimize.GP","text":"","code":"minimize.GP(gp, rng, x0, splinefuns = NULL)"},{"path":"/reference/minimize.GP.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"minimize.GP — minimize.GP","text":"gp Gaussian Process rng range x0 initial values splinefuns spline functions","code":""},{"path":"/reference/minimize.GP.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"minimize.GP — minimize.GP","text":"Michael Dietze","code":""},{"path":"/reference/pda.adjust.jumps.bs.html","id":null,"dir":"Reference","previous_headings":"","what":"Adjust PDA block MCMC jump size — pda.adjust.jumps.bs","title":"Adjust PDA block MCMC jump size — pda.adjust.jumps.bs","text":"Adjust PDA block MCMC jump size","code":""},{"path":"/reference/pda.adjust.jumps.bs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adjust PDA block MCMC jump size — pda.adjust.jumps.bs","text":"","code":"pda.adjust.jumps.bs(settings, jcov, accept.count, params.recent)"},{"path":"/reference/pda.adjust.jumps.bs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adjust PDA block MCMC jump size — pda.adjust.jumps.bs","text":"settings PEcAn settings list jcov jump covariance matrix accept.count aceeptance count params.recent parameters accepted since previous adjustment","code":""},{"path":"/reference/pda.adjust.jumps.bs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adjust PDA block MCMC jump size — pda.adjust.jumps.bs","text":"PEcAn settings list updated reflect adjusted jump distributions","code":""},{"path":"/reference/pda.adjust.jumps.bs.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Adjust PDA block MCMC jump size — pda.adjust.jumps.bs","text":"Ryan Kelly","code":""},{"path":"/reference/pda.adjust.jumps.html","id":null,"dir":"Reference","previous_headings":"","what":"Adjust PDA MCMC jump size — pda.adjust.jumps","title":"Adjust PDA MCMC jump size — pda.adjust.jumps","text":"Adjust PDA MCMC jump size","code":""},{"path":"/reference/pda.adjust.jumps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adjust PDA MCMC jump size — pda.adjust.jumps","text":"","code":"pda.adjust.jumps(settings, jmp.list, accept.rate, pnames = NULL)"},{"path":"/reference/pda.adjust.jumps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adjust PDA MCMC jump size — pda.adjust.jumps","text":"settings PEcAn settings list jmp.list list jump variances accept.rate acceptance rate pnames parameter names","code":""},{"path":"/reference/pda.adjust.jumps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adjust PDA MCMC jump size — pda.adjust.jumps","text":"PEcAn settings list updated reflect adjusted jump distributions","code":""},{"path":"/reference/pda.adjust.jumps.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Adjust PDA MCMC jump size — pda.adjust.jumps","text":"Ryan Kelly","code":""},{"path":"/reference/pda.autocorr.calc.html","id":null,"dir":"Reference","previous_headings":"","what":"autocorrelation correction — pda.autocorr.calc","title":"autocorrelation correction — pda.autocorr.calc","text":"autocorrelation correction","code":""},{"path":"/reference/pda.autocorr.calc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"autocorrelation correction — pda.autocorr.calc","text":"","code":"pda.autocorr.calc(input, model = \"heteroskedastic.laplacian\")"},{"path":"/reference/pda.autocorr.calc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"autocorrelation correction — pda.autocorr.calc","text":"input list contains time-series data vector parameters heteroskedastic.laplacian model data model type, flux data heteroskedastic laplacian, normal example","code":""},{"path":"/reference/pda.autocorr.calc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"autocorrelation correction — pda.autocorr.calc","text":"rho AR(1)","code":""},{"path":"/reference/pda.autocorr.calc.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"autocorrelation correction — pda.autocorr.calc","text":"Istem Fer","code":""},{"path":"/reference/pda.bayesian.tools.html","id":null,"dir":"Reference","previous_headings":"","what":"Paramater Data Assimilation using BayesianTools — pda.bayesian.tools","title":"Paramater Data Assimilation using BayesianTools — pda.bayesian.tools","text":"Paramater Data Assimilation using BayesianTools R Package","code":""},{"path":"/reference/pda.bayesian.tools.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Paramater Data Assimilation using BayesianTools — pda.bayesian.tools","text":"","code":"pda.bayesian.tools(   settings,   external.data = NULL,   external.priors = NULL,   external.formats = NULL,   ensemble.id = NULL,   params.id = NULL,   param.names = NULL,   prior.id = NULL,   chain = NULL,   iter = NULL,   adapt = NULL,   adj.min = NULL,   ar.target = NULL,   jvar = NULL,   remote = FALSE,   ... )"},{"path":"/reference/pda.bayesian.tools.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Paramater Data Assimilation using BayesianTools — pda.bayesian.tools","text":"settings = pecan settings list external.data list external inputs external.priors list external priors external.formats bety formats used function used without DB connection, e.g. remote ensemble.id ensemble IDs params.id id pars param.names names pars prior.id ids priors chain many chains iter many iterations adapt adaptation intervals adj.min used adjustment ar.target acceptance rate target jvar jump variance remote logical, TRUE DB connection established ... additional arguments","code":""},{"path":"/reference/pda.bayesian.tools.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Paramater Data Assimilation using BayesianTools — pda.bayesian.tools","text":"settings","code":""},{"path":"/reference/pda.bayesian.tools.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Paramater Data Assimilation using BayesianTools — pda.bayesian.tools","text":"Istem Fer","code":""},{"path":"/reference/pda.calc.error.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate sufficient statistics — pda.calc.error","title":"Calculate sufficient statistics — pda.calc.error","text":"Calculate sufficient statistics","code":""},{"path":"/reference/pda.calc.error.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate sufficient statistics — pda.calc.error","text":"","code":"pda.calc.error(settings, con, model_out, run.id, inputs, bias.terms)"},{"path":"/reference/pda.calc.error.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate sufficient statistics — pda.calc.error","text":"settings list con DB connection model_out list run.id run ID inputs list bias.terms matrix","code":""},{"path":"/reference/pda.calc.error.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate sufficient statistics — pda.calc.error","text":"pda.errors","code":""},{"path":"/reference/pda.calc.error.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Calculate sufficient statistics — pda.calc.error","text":"Istem Fer","code":""},{"path":"/reference/pda.calc.llik.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Likelihoods for PDA — pda.calc.llik","title":"Calculate Likelihoods for PDA — pda.calc.llik","text":"Calculate Likelihoods PDA","code":""},{"path":"/reference/pda.calc.llik.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Likelihoods for PDA — pda.calc.llik","text":"","code":"pda.calc.llik(pda.errors, llik.fn, llik.par)"},{"path":"/reference/pda.calc.llik.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Likelihoods for PDA — pda.calc.llik","text":"pda.errors calculated errors llik.fn list likelihood fcns llik.par parameters passed llik functions","code":""},{"path":"/reference/pda.calc.llik.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Likelihoods for PDA — pda.calc.llik","text":"Total log likelihood (.e., sum log likelihoods dataset)","code":""},{"path":"/reference/pda.calc.llik.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Calculate Likelihoods for PDA — pda.calc.llik","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.calc.llik.par.html","id":null,"dir":"Reference","previous_headings":"","what":"pda.calc.llik.par — pda.calc.llik.par","title":"pda.calc.llik.par — pda.calc.llik.par","text":"Calculate likelihood parameters","code":""},{"path":"/reference/pda.calc.llik.par.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"pda.calc.llik.par — pda.calc.llik.par","text":"","code":"pda.calc.llik.par(settings, n, error.stats, hyper.pars)"},{"path":"/reference/pda.calc.llik.par.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"pda.calc.llik.par — pda.calc.llik.par","text":"settings list n named vector, sample sizes inputs error.stats list, Sufficient Statistics hyper.pars list, hyperparameters","code":""},{"path":"/reference/pda.calc.llik.par.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"pda.calc.llik.par — pda.calc.llik.par","text":"Istem Fer","code":""},{"path":"/reference/pda.create.btprior.html","id":null,"dir":"Reference","previous_headings":"","what":"Create priors for BayesianTools — pda.create.btprior","title":"Create priors for BayesianTools — pda.create.btprior","text":"Helper function creating log-priors compatible BayesianTools package","code":""},{"path":"/reference/pda.create.btprior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create priors for BayesianTools — pda.create.btprior","text":"","code":"pda.create.btprior(prior.sel)"},{"path":"/reference/pda.create.btprior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create priors for BayesianTools — pda.create.btprior","text":"prior.sel data.frame containing prior distributions selected parameters","code":""},{"path":"/reference/pda.create.btprior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create priors for BayesianTools — pda.create.btprior","text":"Prior class object BayesianTools package","code":""},{"path":"/reference/pda.create.btprior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create priors for BayesianTools — pda.create.btprior","text":"prior.sel must contain following columns: distn – String describing distribution; e.g. norm dnorm, rnorm, etc. parama, paramb – First second parameters, respectively, corresponding distribution Optionally, prior.sel may also contain following columns: param_name – Parameter name, carried prior object sampler lower, upper – Lower upper bounds, respectively. can leveraged BayesianTools samplers. best – Best guess parameter estimate. BayesianTools can also use , though sure ...","code":""},{"path":"/reference/pda.create.btprior.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Create priors for BayesianTools — pda.create.btprior","text":"Istem Fer, Alexey Shiklomanov","code":""},{"path":"/reference/pda.create.ensemble.html","id":null,"dir":"Reference","previous_headings":"","what":"Create ensemble record for PDA ensemble — pda.create.ensemble","title":"Create ensemble record for PDA ensemble — pda.create.ensemble","text":"Create PDA Ensemble","code":""},{"path":"/reference/pda.create.ensemble.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create ensemble record for PDA ensemble — pda.create.ensemble","text":"","code":"pda.create.ensemble(settings, con, workflow.id)"},{"path":"/reference/pda.create.ensemble.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create ensemble record for PDA ensemble — pda.create.ensemble","text":"settings PEcAn settings list con DB connection workflow.id workflow ID","code":""},{"path":"/reference/pda.create.ensemble.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create ensemble record for PDA ensemble — pda.create.ensemble","text":"Ensemble ID created ensemble","code":""},{"path":"/reference/pda.create.ensemble.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Create ensemble record for PDA ensemble — pda.create.ensemble","text":"Ryan Kelly","code":""},{"path":"/reference/pda.define.llik.fn.html","id":null,"dir":"Reference","previous_headings":"","what":"Define PDA Likelihood Functions — pda.define.llik.fn","title":"Define PDA Likelihood Functions — pda.define.llik.fn","text":"Define PDA Likelihood Functions","code":""},{"path":"/reference/pda.define.llik.fn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define PDA Likelihood Functions — pda.define.llik.fn","text":"","code":"pda.define.llik.fn(settings)"},{"path":"/reference/pda.define.llik.fn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define PDA Likelihood Functions — pda.define.llik.fn","text":"settings PEcAn settings list","code":""},{"path":"/reference/pda.define.llik.fn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define PDA Likelihood Functions — pda.define.llik.fn","text":"List likelihood functions, one dataset assimilated .","code":""},{"path":"/reference/pda.define.llik.fn.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Define PDA Likelihood Functions — pda.define.llik.fn","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.define.prior.fn.html","id":null,"dir":"Reference","previous_headings":"","what":"Define PDA Prior Functions — pda.define.prior.fn","title":"Define PDA Prior Functions — pda.define.prior.fn","text":"Define PDA Prior Functions","code":""},{"path":"/reference/pda.define.prior.fn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define PDA Prior Functions — pda.define.prior.fn","text":"","code":"pda.define.prior.fn(prior)"},{"path":"/reference/pda.define.prior.fn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define PDA Prior Functions — pda.define.prior.fn","text":"prior prior dataframe","code":""},{"path":"/reference/pda.define.prior.fn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define PDA Prior Functions — pda.define.prior.fn","text":"List prior functions containing dprior, rprior, qprior, dmvprior, rmvprior. list one distribution function per parameter.","code":""},{"path":"/reference/pda.define.prior.fn.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Define PDA Prior Functions — pda.define.prior.fn","text":"Ryan Kelly","code":""},{"path":"/reference/pda.emulator.html","id":null,"dir":"Reference","previous_headings":"","what":"Paramater Data Assimilation using emulator — pda.emulator","title":"Paramater Data Assimilation using emulator — pda.emulator","text":"Paramater Data Assimilation using emulator","code":""},{"path":"/reference/pda.emulator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Paramater Data Assimilation using emulator — pda.emulator","text":"","code":"pda.emulator(   settings,   external.data = NULL,   external.priors = NULL,   external.knots = NULL,   external.formats = NULL,   ensemble.id = NULL,   params.id = NULL,   param.names = NULL,   prior.id = NULL,   chain = NULL,   iter = NULL,   adapt = NULL,   adj.min = NULL,   ar.target = NULL,   jvar = NULL,   n.knot = NULL,   individual = TRUE,   remote = FALSE )"},{"path":"/reference/pda.emulator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Paramater Data Assimilation using emulator — pda.emulator","text":"settings pecan settings list external.data list external inputs external.priors list external priors external.knots list external knots external.formats bety formats used function used without DB connection, e.g. remote ensemble.id ensemble IDs params.id id pars param.names names pars prior.id ids priors chain many chains iter many iterations adapt adaptation intervals adj.min used adjustment ar.target acceptance rate target jvar jump variance n.knot number knots requested individual logical, TRUE becomes site-level PDA remote logical, TRUE runs submitted remote objects prepared accordingly","code":""},{"path":"/reference/pda.emulator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Paramater Data Assimilation using emulator — pda.emulator","text":"nothing. Diagnostic plots, MCMC samples, posterior distributions saved files db records.","code":""},{"path":"/reference/pda.emulator.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Paramater Data Assimilation using emulator — pda.emulator","text":"Mike Dietze Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.emulator.ms.html","id":null,"dir":"Reference","previous_headings":"","what":"Paramater Data Assimilation using emulator on multiple sites in three modes: local, global, hierarchical First draft, not complete yet — pda.emulator.ms","title":"Paramater Data Assimilation using emulator on multiple sites in three modes: local, global, hierarchical First draft, not complete yet — pda.emulator.ms","text":"Paramater Data Assimilation using emulator multiple sites three modes: local, global, hierarchical First draft, complete yet","code":""},{"path":"/reference/pda.emulator.ms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Paramater Data Assimilation using emulator on multiple sites in three modes: local, global, hierarchical First draft, not complete yet — pda.emulator.ms","text":"","code":"pda.emulator.ms(multi.settings)"},{"path":"/reference/pda.emulator.ms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Paramater Data Assimilation using emulator on multiple sites in three modes: local, global, hierarchical First draft, not complete yet — pda.emulator.ms","text":"multi.settings = pecan multi-settings list","code":""},{"path":"/reference/pda.emulator.ms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Paramater Data Assimilation using emulator on multiple sites in three modes: local, global, hierarchical First draft, not complete yet — pda.emulator.ms","text":"settings","code":""},{"path":"/reference/pda.emulator.ms.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Paramater Data Assimilation using emulator on multiple sites in three modes: local, global, hierarchical First draft, not complete yet — pda.emulator.ms","text":"Istem Fer","code":""},{"path":"/reference/pda.generate.externals.html","id":null,"dir":"Reference","previous_headings":"","what":"This is a helper function for preparing PDA external objects, but it doesn't cover all the cases yet, use it with care You can use this function just to generate either one of the external.* PDA objects, but note that some args cannot be blank depending on what you aim to generate — pda.generate.externals","title":"This is a helper function for preparing PDA external objects, but it doesn't cover all the cases yet, use it with care You can use this function just to generate either one of the external.* PDA objects, but note that some args cannot be blank depending on what you aim to generate — pda.generate.externals","text":"helper function preparing PDA external objects, cover cases yet, use care can use function just generate either one external.* PDA objects, note args blank depending aim generate","code":""},{"path":"/reference/pda.generate.externals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This is a helper function for preparing PDA external objects, but it doesn't cover all the cases yet, use it with care You can use this function just to generate either one of the external.* PDA objects, but note that some args cannot be blank depending on what you aim to generate — pda.generate.externals","text":"","code":"pda.generate.externals(   external.data = FALSE,   obs = NULL,   varn = NULL,   varid = NULL,   n_eff = NULL,   align_method = \"match_timestep\",   par = NULL,   model_data_diag = FALSE,   model.out = NULL,   start_date = NULL,   end_date = NULL,   external.formats = FALSE,   external.priors = FALSE,   prior.list = NULL,   external.knots = FALSE,   knots.list = NULL,   ind.list = NULL,   nknots = NULL )"},{"path":"/reference/pda.generate.externals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This is a helper function for preparing PDA external objects, but it doesn't cover all the cases yet, use it with care You can use this function just to generate either one of the external.* PDA objects, but note that some args cannot be blank depending on what you aim to generate — pda.generate.externals","text":"external.data boolean, TRUE function generate external.data PDA, need pass varn obs , well align_method different \"match_timestep\" obs data (n ordered) list sublist corresponds data frame constraining variable two columns, variable name - posix IMPORTANT: obs must units PEcAn standards already, function unit conversions! IMPORTANT: obs must ready compare model outputs general, e.g. passing flux data already ustar filtered e.g. obs[[1]] NEE           posix 4.590273e-09  2017-01-01 00:00:00 NA  2017-01-01 00:30:00 NA  2017-01-01 01:00:00 NA  2017-01-01 01:30:00 NA  2017-01-01 02:00:00 4.575248e-09  2017-01-01 02:30:00 variable make sure order pass data varn. E.g. varn=c(\"NEE\", \"Qle\"), external.data obs[[1]] NEE  posix NA   2018-05-09 NA   2018-05-10 NA   2018-05-11 NA   2018-05-12 ... ... ... obs[[2]] Qle  posix NA   2018-05-09 NA   2018-05-10 NA   2018-05-11 NA   2018-05-12 ... ... ... varn vector PEcAn standard variable name(s) read model outputs, e.g. c(\"NEE\", \"Qle\") varid vector BETY variable id(s) constraints, e.g. varn = c(\"NEE\", \"Qle\"), varid = c(297, 298) n_eff effective sample size constraints, PDA functions estimates NEE LE, uses heteroskedastic Laplacian , already know passing now save time align_method one benchmark::align_data align_method options \"match_timestep\" \"mean_over_larger_timestep\", defaults \"match_timestep\" par list vector sublists likelihood parameters heteroskedastic laplacian flux data, function calculates NULL NEE, FC, Qle. Leave empty variables e.g. AMF.params <- PEcAn.uncertainty::flux.uncertainty(...fill ...) par <- list(c(AMF.params$intercept, AMF.params$slopeP, AMF.params$slopeN)) model_data_diag optional diagnostics, want check whether model data aligned PDA properly can return dataframe well plot quick & dirty timerseries graph model.example model output folder align data model, e.g. \"/data/workflows/PEcAn_15000000111//15000186876\" start_date start date model.run, e.g. \"2017-01-01\" end_date end date model.run, e.g. \"2018-12-31\" external.formats boolean, TRUE make sure pass varn argument external.priors boolean, TRUE pass prior.list argument prior.list list prior dataframes (one per pft, make sure order <assim.batch> block), using make sure targeted parameters list e.g. prior.list <-  list(data.frame(distn = c(\"norm\", \"beta\"), parama = c(4, 1),  paramb = c(7,2),   n = rep(NA, 2), row.names = c(\"growth_resp_factor\", \"leaf_turnover_rate\")), data.frame(distn = c(\"unif\", \"unif\"), parama = c(10, 4), paramb = c(40,27), n = rep(NA, 2), row.names = c(\"psnTOpt\", \"half_saturation_PAR\"))) external.knots boolean, TRUE pass prior.list, ind.list, nknots knots.list arguments knots.list list dataframes (one per pft) row parameter vector, .e. training points emulator. NULL used, otherwise knots generated using prior.list, ind.list nknots. ind.list named list vectors (one per pft), vector indicates indices parameters prior.list targeted PDA e.g. ind.list <-  list(temperate.deciduous = c(2), temperate.conifer = c(1,2)) nknots number knots want train emulator ","code":""},{"path":"/reference/pda.generate.externals.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This is a helper function for preparing PDA external objects, but it doesn't cover all the cases yet, use it with care You can use this function just to generate either one of the external.* PDA objects, but note that some args cannot be blank depending on what you aim to generate — pda.generate.externals","text":"","code":"if (FALSE) { # \\dontrun{ pda.externals <-  pda.generate.externals(external.data   = TRUE, obs = obs,  varn = \"NEE\", varid = 297, n_eff = 106.9386, external.formats = TRUE, model_data_diag = TRUE,  model.out = \"/tmp/out/outdir\", start_date = \"2017-01-01\", end_date = \"2018-12-31\") } # }"},{"path":"/reference/pda.generate.knots.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Parameter Knots for PDA Emulator — pda.generate.knots","title":"Generate Parameter Knots for PDA Emulator — pda.generate.knots","text":"Generate Parameter Knots PDA Emulator","code":""},{"path":"/reference/pda.generate.knots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Parameter Knots for PDA Emulator — pda.generate.knots","text":"","code":"pda.generate.knots(   n.knot,   sf,   probs.sf,   n.param.all,   prior.ind,   prior.fn,   pname )"},{"path":"/reference/pda.generate.knots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Parameter Knots for PDA Emulator — pda.generate.knots","text":"n.knot number knots sf scaling factor probs.sf values sf n.param.number params prior.ind indices targeted parameters prior dataframe prior.fn list prior functions pname name parameters","code":""},{"path":"/reference/pda.generate.knots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Parameter Knots for PDA Emulator — pda.generate.knots","text":"list probabilities parameter values, one row knot emulator.","code":""},{"path":"/reference/pda.generate.knots.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Generate Parameter Knots for PDA Emulator — pda.generate.knots","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.generate.sf.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate scaling factor knots for PDA Emulator — pda.generate.sf","title":"Generate scaling factor knots for PDA Emulator — pda.generate.sf","text":"Generate scaling factor knots PDA Emulator","code":""},{"path":"/reference/pda.generate.sf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate scaling factor knots for PDA Emulator — pda.generate.sf","text":"","code":"pda.generate.sf(n.knot, sf, prior.list)"},{"path":"/reference/pda.generate.sf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate scaling factor knots for PDA Emulator — pda.generate.sf","text":"n.knot number knots sf scaling factor prior.list list prior dataframes","code":""},{"path":"/reference/pda.generate.sf.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Generate scaling factor knots for PDA Emulator — pda.generate.sf","text":"Istem Fer","code":""},{"path":"/reference/pda.get.model.output.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Model Output for PDA — pda.get.model.output","title":"Get Model Output for PDA — pda.get.model.output","text":"Get Model Output PDA","code":""},{"path":"/reference/pda.get.model.output.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Model Output for PDA — pda.get.model.output","text":"","code":"pda.get.model.output(settings, run.id, bety, inputs, external.formats = NULL)"},{"path":"/reference/pda.get.model.output.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Model Output for PDA — pda.get.model.output","text":"settings PEcAn settings list run.id run ID bety database connection inputs inputs list external.formats format list","code":""},{"path":"/reference/pda.get.model.output.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Model Output for PDA — pda.get.model.output","text":"list containing model outputs extracted correspond observational dataset used PDA.","code":""},{"path":"/reference/pda.get.model.output.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get Model Output for PDA — pda.get.model.output","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.init.params.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialise Parameter Matrix for PDA — pda.init.params","title":"Initialise Parameter Matrix for PDA — pda.init.params","text":"Initialise Parameter Matrix PDA","code":""},{"path":"/reference/pda.init.params.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialise Parameter Matrix for PDA — pda.init.params","text":"","code":"pda.init.params(settings, chain, pname, n.param.all)"},{"path":"/reference/pda.init.params.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialise Parameter Matrix for PDA — pda.init.params","text":"settings PEcAn settings list chain number chain pname parameter name n.param.number params","code":""},{"path":"/reference/pda.init.params.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initialise Parameter Matrix for PDA — pda.init.params","text":"list containing 'start' 'finish' counters MCMC, well params table, empty matrix concatenated param samples previous PDA run, provided.","code":""},{"path":"/reference/pda.init.params.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Initialise Parameter Matrix for PDA — pda.init.params","text":"Ryan Kelly","code":""},{"path":"/reference/pda.init.run.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialise Model Runs for PDA — pda.init.run","title":"Initialise Model Runs for PDA — pda.init.run","text":"Initialise Model Runs PDA","code":""},{"path":"/reference/pda.init.run.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialise Model Runs for PDA — pda.init.run","text":"","code":"pda.init.run(   settings,   con,   my.write.config,   workflow.id,   params,   n = ifelse(is.null(dim(params)), 1, nrow(params)),   run.names = paste(\"run\", 1:n, sep = \".\") )"},{"path":"/reference/pda.init.run.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialise Model Runs for PDA — pda.init.run","text":"settings PEcAn settings list con DB connection .write.config model write config fcn name workflow.id workflow ID params parameters run n number runs run.names names runs","code":""},{"path":"/reference/pda.init.run.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initialise Model Runs for PDA — pda.init.run","text":"Vector run IDs model runs set (including write.configs)","code":""},{"path":"/reference/pda.init.run.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Initialise Model Runs for PDA — pda.init.run","text":"Ryan Kelly","code":""},{"path":"/reference/pda.load.priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Priors for Paramater Data Assimilation — pda.load.priors","title":"Load Priors for Paramater Data Assimilation — pda.load.priors","text":"Load Priors Paramater Data Assimilation","code":""},{"path":"/reference/pda.load.priors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Priors for Paramater Data Assimilation — pda.load.priors","text":"","code":"pda.load.priors(settings, con, extension.check = FALSE)"},{"path":"/reference/pda.load.priors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Priors for Paramater Data Assimilation — pda.load.priors","text":"settings PEcAn settings list con database connection extension.check check another round longer run","code":""},{"path":"/reference/pda.load.priors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Priors for Paramater Data Assimilation — pda.load.priors","text":"previously-generated posterior distribution, used prior PDA.","code":""},{"path":"/reference/pda.load.priors.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Load Priors for Paramater Data Assimilation — pda.load.priors","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.mcmc.bs.html","id":null,"dir":"Reference","previous_headings":"","what":"Paramater Data Assimilation using MCMC — pda.mcmc.bs","title":"Paramater Data Assimilation using MCMC — pda.mcmc.bs","text":"Parameter Data Assimilation using MCMC block sampling","code":""},{"path":"/reference/pda.mcmc.bs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Paramater Data Assimilation using MCMC — pda.mcmc.bs","text":"","code":"pda.mcmc.bs(   settings,   params.id = NULL,   param.names = NULL,   prior.id = NULL,   chain = NULL,   iter = NULL,   adapt = NULL,   adj.min = NULL,   ar.target = NULL,   jvar = NULL,   n.knot = NULL )"},{"path":"/reference/pda.mcmc.bs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Paramater Data Assimilation using MCMC — pda.mcmc.bs","text":"settings = pecan settings list params.id id pars param.names names pars prior.id ids priors chain many chains iter many iterations adapt adaptation intervals adj.min used adjustment ar.target acceptance rate target jvar jump variance n.knot number knots requested","code":""},{"path":"/reference/pda.mcmc.bs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Paramater Data Assimilation using MCMC — pda.mcmc.bs","text":"nothing. Diagnostic plots, MCMC samples, posterior distributions saved files db records.","code":""},{"path":"/reference/pda.mcmc.bs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Paramater Data Assimilation using MCMC — pda.mcmc.bs","text":"Brute-force, used simple models","code":""},{"path":"/reference/pda.mcmc.bs.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Paramater Data Assimilation using MCMC — pda.mcmc.bs","text":"Mike Dietze Ryan Kelly","code":""},{"path":"/reference/pda.mcmc.html","id":null,"dir":"Reference","previous_headings":"","what":"Paramater Data Assimilation using MCMC — pda.mcmc","title":"Paramater Data Assimilation using MCMC — pda.mcmc","text":"Paramater Data Assimilation using MCMC","code":""},{"path":"/reference/pda.mcmc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Paramater Data Assimilation using MCMC — pda.mcmc","text":"","code":"pda.mcmc(   settings,   params.id = NULL,   param.names = NULL,   prior.id = NULL,   chain = NULL,   iter = NULL,   adapt = NULL,   adj.min = NULL,   ar.target = NULL,   jvar = NULL,   n.knot = NULL )"},{"path":"/reference/pda.mcmc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Paramater Data Assimilation using MCMC — pda.mcmc","text":"settings = pecan settings list params.id id pars param.names names pars prior.id ids priors chain many chains iter many iterations adapt adaptation intervals adj.min used adjustment ar.target acceptance rate target jvar jump variance n.knot number knots requested","code":""},{"path":"/reference/pda.mcmc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Paramater Data Assimilation using MCMC — pda.mcmc","text":"nothing. Diagnostic plots, MCMC samples, posterior distributions saved files db records.","code":""},{"path":"/reference/pda.mcmc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Paramater Data Assimilation using MCMC — pda.mcmc","text":"Brute-force, used simple models","code":""},{"path":"/reference/pda.mcmc.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Paramater Data Assimilation using MCMC — pda.mcmc","text":"Mike Dietze Ryan Kelly","code":""},{"path":"/reference/pda.mcmc.recover.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean up a failed PDA run — pda.mcmc.recover","title":"Clean up a failed PDA run — pda.mcmc.recover","text":"Clean failed PDA run","code":""},{"path":"/reference/pda.mcmc.recover.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean up a failed PDA run — pda.mcmc.recover","text":"","code":"pda.mcmc.recover(   settings,   params.id = NULL,   param.names = NULL,   prior.id = NULL,   chain = NULL,   iter = NULL,   adapt = NULL,   adj.min = NULL,   ar.target = NULL,   jvar = NULL,   n.knot = NULL,   burnin = NULL )"},{"path":"/reference/pda.mcmc.recover.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean up a failed PDA run — pda.mcmc.recover","text":"settings PEcAn param list params.id id pars param.names names pars prior.id ids priors chain many chains iter many iterations adapt adaptation intervals adj.min used adjustment ar.target acceptance rate target jvar jump variance n.knot number knots requested burnin burnin","code":""},{"path":"/reference/pda.mcmc.recover.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean up a failed PDA run — pda.mcmc.recover","text":"updated settings list","code":""},{"path":"/reference/pda.mcmc.recover.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Clean up a failed PDA run — pda.mcmc.recover","text":"Ryan Kelly","code":""},{"path":"/reference/pda.neff.calc.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate N_eff — pda.neff.calc","title":"Calculate N_eff — pda.neff.calc","text":"Autocorelation correction efficient sample size calculation latent process","code":""},{"path":"/reference/pda.neff.calc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate N_eff — pda.neff.calc","text":"","code":"pda.neff.calc(inputs, recalculate = FALSE)"},{"path":"/reference/pda.neff.calc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate N_eff — pda.neff.calc","text":"inputs list recalculate repeat neff calculation ","code":""},{"path":"/reference/pda.neff.calc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate N_eff — pda.neff.calc","text":"inputs list, updated inputs n_eff","code":""},{"path":"/reference/pda.neff.calc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate N_eff — pda.neff.calc","text":"trying calculate autocorrelation latent state, attempting \"remove\" observation error. first step thus estimate latent state using simple 'process free' state-space model (e.g. random walk).","code":""},{"path":"/reference/pda.neff.calc.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Calculate N_eff — pda.neff.calc","text":"Istem Fer","code":""},{"path":"/reference/pda.plot.params.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot PDA Parameter Diagnostics — pda.plot.params","title":"Plot PDA Parameter Diagnostics — pda.plot.params","text":"Plot PDA Parameter Diagnostics","code":""},{"path":"/reference/pda.plot.params.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot PDA Parameter Diagnostics — pda.plot.params","text":"","code":"pda.plot.params(   settings,   mcmc.param.list,   prior.ind,   par.file.name = NULL,   sffx )"},{"path":"/reference/pda.plot.params.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot PDA Parameter Diagnostics — pda.plot.params","text":"settings PEcAn settings list mcmc.param.list MCMC param list sorted prior.ind indices targeted parameters par.file.name output file name sffx suffix output file names","code":""},{"path":"/reference/pda.plot.params.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot PDA Parameter Diagnostics — pda.plot.params","text":"Nothing. Plot generated saved PDF.","code":""},{"path":"/reference/pda.plot.params.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Plot PDA Parameter Diagnostics — pda.plot.params","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.postprocess.html","id":null,"dir":"Reference","previous_headings":"","what":"Postprocessing for PDA Results — pda.postprocess","title":"Postprocessing for PDA Results — pda.postprocess","text":"Postprocessing PDA Results","code":""},{"path":"/reference/pda.postprocess.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Postprocessing for PDA Results — pda.postprocess","text":"","code":"pda.postprocess(   settings,   con,   mcmc.param.list,   pname,   prior,   prior.ind,   sffx = NULL )"},{"path":"/reference/pda.postprocess.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Postprocessing for PDA Results — pda.postprocess","text":"settings PEcAn settings list con DB connection mcmc.param.list output PDA MCMC pname parameter names prior prior list prior.ind indices targeted parameters sffx suffix output files, e.g. \"hierarchical\"","code":""},{"path":"/reference/pda.postprocess.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Postprocessing for PDA Results — pda.postprocess","text":"PEcAn settings list, updated <params.id> pointing new params file.","code":""},{"path":"/reference/pda.postprocess.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Postprocessing for PDA Results — pda.postprocess","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.settings.bt.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply settings for BayesianTools — pda.settings.bt","title":"Apply settings for BayesianTools — pda.settings.bt","text":"Helper function applying BayesianTools specific settings PEcAn general settings","code":""},{"path":"/reference/pda.settings.bt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply settings for BayesianTools — pda.settings.bt","text":"","code":"pda.settings.bt(settings)"},{"path":"/reference/pda.settings.bt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply settings for BayesianTools — pda.settings.bt","text":"settings PEcAn settings","code":""},{"path":"/reference/pda.settings.bt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply settings for BayesianTools — pda.settings.bt","text":"bt.settings list BayesianTools::runMCMC settings","code":""},{"path":"/reference/pda.settings.bt.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Apply settings for BayesianTools — pda.settings.bt","text":"Istem Fer","code":""},{"path":"/reference/pda.settings.html","id":null,"dir":"Reference","previous_headings":"","what":"Set PDA Settings — pda.settings","title":"Set PDA Settings — pda.settings","text":"Set PDA Settings","code":""},{"path":"/reference/pda.settings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set PDA Settings — pda.settings","text":"","code":"pda.settings(   settings,   params.id = NULL,   param.names = NULL,   prior.id = NULL,   chain = NULL,   iter = NULL,   adapt = NULL,   adj.min = NULL,   ar.target = NULL,   jvar = NULL,   n.knot = NULL,   run.round = FALSE )"},{"path":"/reference/pda.settings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set PDA Settings — pda.settings","text":"settings PEcAn settings list params.id id pars param.names names pars prior.id ids priors chain many chains iter many iterations adapt adaptation intervals adj.min used adjustment ar.target acceptance rate target jvar jump variance n.knot number knots requested run.round another round ","code":""},{"path":"/reference/pda.settings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set PDA Settings — pda.settings","text":"updated settings list","code":""},{"path":"/reference/pda.settings.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Set PDA Settings — pda.settings","text":"Ryan Kelly, Istem Fer","code":""},{"path":"/reference/pda.sort.params.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to sort Hierarchical MCMC samples — pda.sort.params","title":"Function to sort Hierarchical MCMC samples — pda.sort.params","text":"Function sort Hierarchical MCMC samples","code":""},{"path":"/reference/pda.sort.params.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to sort Hierarchical MCMC samples — pda.sort.params","text":"","code":"pda.sort.params(   mcmc.out,   sub.sample = \"mu_global_samp\",   ns = NULL,   prior.all,   prior.ind.all.ns,   sf = NULL,   n.param.orig,   prior.list,   prior.fn.all )"},{"path":"/reference/pda.sort.params.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to sort Hierarchical MCMC samples — pda.sort.params","text":"mcmc.MCMC samples sub.sample subsample return ns site number prior.prior dataframe prior.ind..ns indices targeted parameters prior.dataframe sf scaling factor used n.param.orig original indices parameters prior.list prior.list list prior dataframes prior.fn.prior functions","code":""},{"path":"/reference/prepare_pda_remote.html","id":null,"dir":"Reference","previous_headings":"","what":"helper function for submitting remote pda runs — prepare_pda_remote","title":"helper function for submitting remote pda runs — prepare_pda_remote","text":"helper function submitting remote pda runs","code":""},{"path":"/reference/prepare_pda_remote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"helper function for submitting remote pda runs — prepare_pda_remote","text":"","code":"prepare_pda_remote(settings, site = 1, multi_site_objects)"},{"path":"/reference/prepare_pda_remote.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"helper function for submitting remote pda runs — prepare_pda_remote","text":"settings PEcAn settings list site site number (site) multi_site_objects information needed remote runs","code":""},{"path":"/reference/return.bias.html","id":null,"dir":"Reference","previous_headings":"","what":"return.bias — return.bias","title":"return.bias — return.bias","text":"return.bias","code":""},{"path":"/reference/return.bias.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"return.bias — return.bias","text":"","code":"return.bias(   settings,   isbias,   model.out,   inputs,   prior.list.bias,   run.round = FALSE,   pass2bias = NULL )"},{"path":"/reference/return.bias.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"return.bias — return.bias","text":"settings settings list isbias bias variable index model.model output list inputs inputs list prior.list.bias prior list, bias prior added run.round extension flag pass2bias another round, re-sampled MCMC samples, go rest model params","code":""},{"path":"/reference/return.bias.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"return.bias — return.bias","text":"Istem Fer","code":""},{"path":"/reference/return_hyperpars.html","id":null,"dir":"Reference","previous_headings":"","what":"return_hyperpars — return_hyperpars","title":"return_hyperpars — return_hyperpars","text":"return_hyperpars","code":""},{"path":"/reference/return_hyperpars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"return_hyperpars — return_hyperpars","text":"","code":"return_hyperpars(assim.settings, inputs)"},{"path":"/reference/return_hyperpars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"return_hyperpars — return_hyperpars","text":"assim.settings PEcAn settings list inputs inputs list","code":""},{"path":"/reference/return_hyperpars.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"return_hyperpars — return_hyperpars","text":"Istem Fer","code":""},{"path":"/reference/return_multi_site_objects.html","id":null,"dir":"Reference","previous_headings":"","what":"This is a helper function partly uses pda.emulator code — return_multi_site_objects","title":"This is a helper function partly uses pda.emulator code — return_multi_site_objects","text":"helper function partly uses pda.emulator code","code":""},{"path":"/reference/return_multi_site_objects.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This is a helper function partly uses pda.emulator code — return_multi_site_objects","text":"","code":"return_multi_site_objects(multi.settings)"},{"path":"/reference/return_multi_site_objects.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This is a helper function partly uses pda.emulator code — return_multi_site_objects","text":"multi.settings PEcAn multi settings object","code":""},{"path":"/reference/runModule.assim.batch.html","id":null,"dir":"Reference","previous_headings":"","what":"Run Batch module — runModule.assim.batch","title":"Run Batch module — runModule.assim.batch","text":"Run Batch module","code":""},{"path":"/reference/runModule.assim.batch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run Batch module — runModule.assim.batch","text":"","code":"runModule.assim.batch(settings)"},{"path":"/reference/runModule.assim.batch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run Batch module — runModule.assim.batch","text":"settings PEcAn settings list","code":""},{"path":"/reference/sample_MCMC.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to sample from previous MCMC chain while proposing new knots — sample_MCMC","title":"Helper function to sample from previous MCMC chain while proposing new knots — sample_MCMC","text":"Helper function sample previous MCMC chain proposing new knots","code":""},{"path":"/reference/sample_MCMC.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to sample from previous MCMC chain while proposing new knots — sample_MCMC","text":"","code":"sample_MCMC(   mcmc_path,   n.param.orig,   prior.ind.orig,   n.post.knots,   knots.params.temp,   prior.list,   prior.fn,   sf,   sf.samp )"},{"path":"/reference/sample_MCMC.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to sample from previous MCMC chain while proposing new knots — sample_MCMC","text":"mcmc_path path previous emulator mcmc samples object n.param.orig vector, number parameters targeted (pft) sublist prior.ind.orig list, actual indices parameters targeted (pft) sublist n.post.knots number new samples requested knots.params.temp list parameter samples proposed original PDA-prior prior.list PDA-prior list prior.fn list parameter d/r/q/p functions sf SF parameter names sf.samp SF parameters MCMC samples","code":""},{"path":"/reference/sample_MCMC.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Helper function to sample from previous MCMC chain while proposing new knots — sample_MCMC","text":"Istem Fer","code":""},{"path":"/reference/sync_pda_remote.html","id":null,"dir":"Reference","previous_headings":"","what":"helper function for syncing remote pda runs this function resembles remote.copy.from but we don't want to sync everything back — sync_pda_remote","title":"helper function for syncing remote pda runs this function resembles remote.copy.from but we don't want to sync everything back — sync_pda_remote","text":"helper function syncing remote pda runs function resembles remote.copy.want sync everything back","code":""},{"path":"/reference/sync_pda_remote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"helper function for syncing remote pda runs this function resembles remote.copy.from but we don't want to sync everything back — sync_pda_remote","text":"","code":"sync_pda_remote(multi.settings, ensembleidlist, register = FALSE)"},{"path":"/reference/sync_pda_remote.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"helper function for syncing remote pda runs this function resembles remote.copy.from but we don't want to sync everything back — sync_pda_remote","text":"multi.settings PEcAn multi settings ensembleidlist ensemble id list remote runs register register==TRUE, last files returned registered DB, DONE","code":""},{"path":"/reference/write_sf_posterior.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to write posterior distributions of the scaling factors — write_sf_posterior","title":"Function to write posterior distributions of the scaling factors — write_sf_posterior","text":"Function write posterior distributions scaling factors","code":""},{"path":"/reference/write_sf_posterior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to write posterior distributions of the scaling factors — write_sf_posterior","text":"","code":"write_sf_posterior(sf.samp.list, sf.prior, sf.samp.filename)"},{"path":"/reference/write_sf_posterior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to write posterior distributions of the scaling factors — write_sf_posterior","text":"sf.samp.list scaling factor MCMC samples sf.prior scaling factor prior sf.samp.filename scaling factor posterior output file name","code":""},{"path":[]},{"path":"/news/index.html","id":"license-change-1-9-0","dir":"Changelog","previous_headings":"","what":"License change","title":"PEcAn.assim.batch 1.9.0","text":"PEcAn.assim.batch now distributed BSD three-clause license instead NCSA Open Source license.","code":""},{"path":[]},{"path":"/news/index.html","id":"breaking-changes-1-8-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"PEcAn.assim.batch 1.8.0","text":"functions gpeval mcmc.GP, parameter splinefcns renamed splinefuns match spelling minimize.GP, thereby also fixing several cases wrong name passed functions.","code":""},{"path":"/news/index.html","id":"added-1-8-0","dir":"Changelog","previous_headings":"","what":"Added","title":"PEcAn.assim.batch 1.8.0","text":"Functions bounded, calculate.prior, ddist, get_ss, get_y, gepeval, .accepted, mcmc.GP, minimize.GP, used sampling Gaussian processes, moved package PEcAn.emulator correct circular dependency.","code":""},{"path":"/news/index.html","id":"pecanassimbatch-171","dir":"Changelog","previous_headings":"","what":"PEcAn.assim.batch 1.7.1","title":"PEcAn.assim.batch 1.7.1","text":"changes 1.7.1 earlier recorded single file PEcAn packages; please see https://github.com/PecanProject/pecan/blob/v1.7.1/CHANGELOG.md details.","code":""}]
