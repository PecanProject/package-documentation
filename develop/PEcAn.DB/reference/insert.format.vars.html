<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Insert Format and Format-Variable Records — insert.format.vars • PEcAn.DB</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Insert Format and Format-Variable Records — insert.format.vars"><meta name="description" content="Insert Format and Format-Variable Records"><meta property="og:description" content="Insert Format and Format-Variable Records"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PEcAn.DB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.2.9000</small>

    <a href="../index.html" style="padding: 0em 1em">← Up</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/betydb_access.html">BETYdb Access</a></li>
    <li><a class="dropdown-item" href="../articles/create_sites.geometry.html">Create PostGIS polygon</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Insert Format and Format-Variable Records</h1>
      <small class="dont-index">Source: <a href="https://github.com/PecanProject/pecan/blob/develop/base/db/R/insert.format.vars.R" class="external-link"><code>R/insert.format.vars.R</code></a></small>
      <div class="d-none name"><code>insert.format.vars.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Insert Format and Format-Variable Records</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">insert.format.vars</span><span class="op">(</span></span>
<span>  <span class="va">con</span>,</span>
<span>  <span class="va">format_name</span>,</span>
<span>  <span class="va">mimetype_id</span>,</span>
<span>  notes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  skip <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  formats_variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  suppress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-con">con<a class="anchor" aria-label="anchor" href="#arg-con"></a></dt>
<dd><p>SQL connection to BETYdb</p></dd>


<dt id="arg-format-name">format_name<a class="anchor" aria-label="anchor" href="#arg-format-name"></a></dt>
<dd><p>The name of the format. Type: character string.</p></dd>


<dt id="arg-mimetype-id">mimetype_id<a class="anchor" aria-label="anchor" href="#arg-mimetype-id"></a></dt>
<dd><p>The id associated with the mimetype of the format. Type: integer.</p></dd>


<dt id="arg-notes">notes<a class="anchor" aria-label="anchor" href="#arg-notes"></a></dt>
<dd><p>Additional description of the format: character string.</p></dd>


<dt id="arg-header">header<a class="anchor" aria-label="anchor" href="#arg-header"></a></dt>
<dd><p>Boolean that indicates the presence of a header in the format. Defaults to "TRUE".</p></dd>


<dt id="arg-skip">skip<a class="anchor" aria-label="anchor" href="#arg-skip"></a></dt>
<dd><p>Integer that indicates the number of lines to skip in the header. Defaults to 0.</p></dd>


<dt id="arg-formats-variables">formats_variables<a class="anchor" aria-label="anchor" href="#arg-formats-variables"></a></dt>
<dd><p>A 'tibble' consisting of entries that correspond to columns in the formats-variables table. See Details for further information.</p></dd>


<dt id="arg-suppress">suppress<a class="anchor" aria-label="anchor" href="#arg-suppress"></a></dt>
<dd><p>Boolean that suppresses or allows a test for an existing variable id. This test is inconvenient in applications where the variable_ids are already known.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>format_id</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The formats_variables argument must be a 'tibble' and be structured in a specific format so that the SQL query functions properly. All arguments should be passed as vectors so that each entry will correspond with a specific row. All empty values should be specified as NA.</p><dl><dt>variable_id</dt>
<dd><p>(Required) Vector of integers.</p></dd>

<dt>name</dt>
<dd><p>(Optional) Vector of character strings. The variable name in the imported data need only be specified if it differs from the BETY variable name.</p></dd>

<dt>unit</dt>
<dd><p>(Optional) Vector of type character string. Should be in a format parseable by the udunits library and need only be secified if the units of the data in the file differ from the BETY standard.</p></dd>

<dt>storage_type</dt>
<dd><p>(Optional) Vector of character strings. Storage type need only be specified if the variable is stored in a format other than would be expected (e.g. if numeric values are stored as quoted character strings). Additionally, storage_type stores POSIX codes that are used to store any time variables (e.g. a column with a 4-digit year would be %Y). See also <code>[base::strptime]</code></p></dd>

<dt>column_number</dt>
<dd><p>Vector of integers that list the column numbers associated with variables in a dataset. Required for text files that lack headers.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Liam Burke (liam.burke24@gmail.com)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="db.open.html">db.open</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>host <span class="op">=</span> <span class="st">"postgres"</span>, user <span class="op">=</span> <span class="st">"bety"</span>, password <span class="op">=</span> <span class="st">"carya"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">formats_variables_tibble</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  variable_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">411</span>, <span class="fl">135</span>, <span class="fl">382</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NPP"</span>, <span class="cn">NA</span>, <span class="st">"YEAR"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"g C m-2 yr-1"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  storage_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"%Y"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  column_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="cn">NA</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">insert.format.vars</span><span class="op">(</span></span></span>
<span class="r-in"><span>  con <span class="op">=</span> <span class="va">con</span>,</span></span>
<span class="r-in"><span>  format_name <span class="op">=</span> <span class="st">"LTER-HFR-103"</span>,</span></span>
<span class="r-in"><span>  mimetype_id <span class="op">=</span> <span class="fl">1090</span>,</span></span>
<span class="r-in"><span>  notes <span class="op">=</span> <span class="st">"NPP from Harvard Forest."</span>,</span></span>
<span class="r-in"><span>  header <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  skip <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  formats_variables <span class="op">=</span> <span class="va">formats_variables_tibble</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David LeBauer, Mike Dietze, Rob Kooper, Shawn Serbin, Elizabeth Cowdery, Ankur Desai, Istem Fer, Alexey Shiklomanov, Tony Gardella, Chris Black, Liam Burke, Ryan Kelly, Dan Wang, Carl Davidson, Xiaohui Feng, Shashank Singh.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

